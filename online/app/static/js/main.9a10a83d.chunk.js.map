{"version":3,"sources":["serviceWorker.js","bundles/mesh.js","fields/golden.js","bundles/camera.js","bundles/models.js","commands/buildstrut.js","bundles/planes.js","components/buildplane.jsx","components/geometry.js","components/modelcanvas-three.js","bundles/alerts.js","components/alert.js","components/spinner.js","components/about.js","components/webloader.js","bundles/progress.js","bundles/files.js","components/designs.js","components/logo.js","components/appbar.js","App.js","bundles/index.js","models/logo/index.js","bundles/cheerpj.js","bundles/lighting.js","commands/centroid.js","commands/shortred.js","commands/index.js","bundles/shapers.js","bundles/adapter.js","bundles/jsweet.js","fields/index.js","index.js"],"names":["Boolean","window","location","hostname","match","meshChanged","shown","selected","hidden","type","payload","justOrigin","field","originBall","createInstance","origin","Map","set","id","groups","initialState","vectors","strings","map","n","JSON","stringify","min","minIndex","i","length","localeCompare","sorted","j","canonicalizedId","PHI","Math","sqrt","grsign","a","a0","a1","ad","float","gcd","b","abs","simplify3","v0","v1","v2","TypeError","s0","s1","s2","g","getRandomInt","max","ceil","floor","random","times","b0","b1","plus","bd","minus","scalarmul","s","v","values","vi","negate","embed","quatmul","u","x","u0","u1","u2","u3","v3","one","h","blue","yellow","red","r","y","q","vZomeIcosahedralQuaternions","push","reduce","f","goldenSequence","depth","seq","acc","item","replacement","symbolSequence","symbol","name","order","zero","goldenRatio","quaternions","goldenSeries","dimensions","result","index","vectoradd","ui","reciprocal","createRationalFromPairs","pairs","d0","d1","quatTransform","Q","concat","quatconj","slice","embedv","createRational","d","randomVector","aspectRatio","innerWidth","innerHeight","convertFOV","fovX","PI","fov","position","lookAt","up","far","near","reducer","state","action","lookAtPoint","upDirection","fieldOfView","nearClipDistance","farClipDistance","Object","parseViewXml","viewingElement","parseVector","element","child","getChildElement","parseFloat","getAttribute","z","viewModel","distance","lookDirection","designReducer","combineReducers","history","undoable","mesh","obj","get","Error","delete","fieldName","shaperName","camera","initializeDesign","past","present","future","emptyState","nextUntitledIndex","data","addNewModel","current","newModel","switchModel","renameModel","loadedDesign","design","selectCurrentDesign","models","selectCurrentMesh","selectCurrentCamera","selectCurrentField","fields","selectCurrentShaper","shapers","goldenField","oldName","model","modelState","start","end","dispatch","getState","designs","newBall","newStrut","doStartGridHover","doStopGridHover","doStartBallHover","doStopBallHover","doBallClick","focus","buildStrut","doBackgroundClick","doSetWorkingPlaneGrid","grid","doChangeOrientation","series","forEach","nx","ny","endPt","undefined","quaternion","size","color","enabled","buildingStruts","target","orientation","BuildPlane","config","startGridHover","stopGridHover","useResource","materialRef","material","dotSize","makeAbsolute","gridPt","vector3d","w","wlast","ref","transparent","opacity","side","THREE","gv","key","onPointerOver","e","stopPropagation","handleHoverIn","onPointerOut","handleHoverOut","onClick","console","log","handleClick","attach","args","createGeometry","vertices","faces","geometry","face","e1","subVectors","e2","crossVectors","computeNormal","computeBoundingSphere","Instance","rotation","highlightBall","onHover","emissive","InstancedShape","instances","shape","useMemo","instance","shapeInstance","shapedInstances","resolve","shapedInstance","filterInstances","filter","shapeId","Geometry","resolver","preResolved","shapes","sortedInstances","extend","TrackballControls","Controls","props","useThree","gl","controls","useRef","useFrame","update","domElement","DirLight","direction","light","object","Lighting","backgroundColor","ambientColor","directionalLights","scene","background","boundEventActions","selectionToggler","objectDeselected","objectSelected","planes","startBallHover","stopBallHover","shapeClick","bkgdClick","connect","lighting","workingPlane","java","renderingOn","previous","previewBall","has","previewStrut","clickable","antialias","alpha","onPointerMissed","event","which","button","isLeftMouseButton","makeDefault","staticMoving","rotateSpeed","zoomSpeed","panSpeed","inbound","showAlert","message","clearAlert","dismissed","alerts","Snackbar","open","onClose","anchorOrigin","vertical","horizontal","Alert","variant","severity","AlertTitle","useStyles","makeStyles","theme","backdrop","zIndex","drawer","progress","visible","showing","classes","Backdrop","className","CircularProgress","DialogTitle","withStyles","root","margin","padding","spacing","closeButton","right","top","palette","grey","children","other","disableTypography","Typography","IconButton","aria-label","DialogContent","MuiDialogContent","MuiDialogActions","AboutDialog","React","useState","setOpen","handleClose","Tooltip","title","fontSize","Dialog","aria-labelledby","dividers","gutterBottom","Link","href","rel","show","setShow","openDesign","url","setUrl","handleCancel","maxWidth","fullWidth","DialogContentText","TextField","onChange","value","autoFocus","label","DialogActions","Button","startProgress","stopProgress","fetchModel","path","fetch","then","response","ok","text","split","pop","parser","catch","error","download","filename","bytes","blob","Blob","subarray","document","createElement","blobURI","URL","createObjectURL","setAttribute","style","display","body","appendChild","click","removeChild","description","openFile","reader","FileReader","onload","onerror","readAsText","anchorEl","setAnchorEl","showDialog","setShowDialog","currentTarget","Menu","keepMounted","MenuItem","files","accept","Divider","handleSelectModel","VZomeLogo","SvgIcon","stroke","strokeLinejoin","strokeWidth","viewBox","fill","flexGrow","marginLeft","marginRight","VZomeAppBar","AppBar","Toolbar","Box","component","fontStyle","App","bundles","notes","MODEL_LOADED","FILE_EXPORTED","exportTriggered","extension","controller","fileName","replace","createWriteableFile","file","callObjectMethod","normalize","pos","quat","javaReady","readOnly","DEFAULT_MODEL","findIndex","parseModelFile","xmlText","writeTextFile","callStaticMethod","methodname","cjCall","classname","cjNew","cheerpjAddStringFile","init","store","dispatchToRedux","parse","fileExported","cheerpjInit","preloadResources","status","javaProperties","pp","pathname","classpath","cheerpjRunMain","urlParams","URLSearchParams","search","decodeURI","mapLightDir","scale","sum","commandsDefined","centroid","shortred","buildstrut","commands","commandTriggered","cmd","command","newCommands","shaperDefined","shaper","Adapter","this","temp","Array","from","selectionIsGroup","group","keys","some","getLargestGroup","getSelectionGroup","selectionSize","find","every","largestGroup","matchingGroups","includes","largestSize","existing","shownArray","selectedArray","hiddenArray","working","defaults","knownOrbitNames","shapeNames","makeQuaternions","matrices","am","m","an","getElement","evaluate","matrix2quat","t","m00","m10","m20","m01","m11","m21","m02","m12","m22","vzomePkg","com","vzome","util","ImportColoredMeshJson","offset","events","registry","coloredMesh","meshData","getField","nums","vertex","createIntegerVectorFromTDs","dimension","projection","projectImage","balls","ball","core","construction","Color","parseWebColor","constructionAdded","FreePoint","struts","strut","point1","point2","SegmentJoiningPoints","edits","ImportMesh","ImportSimpleMeshJson","simpleMesh","edges","xmlToEditClass","editName","setItemColor","BnPolyope","DeselectByClass","realizeMetaParts","SelectSimilarSize","zomic","py","apiProxy","editor","editFactory","toolFactories","toolsModel","xmlElement","getLocalName","toolEdit","createEdit","toolId","factory","edit","deserializeTool","editClass","CommandEdit","injectResource","fullPath","xml","ResourceLoader","Promise","all","properties","Properties","colors","render","Colors","gfield","jsweet","JsAlgebraicField","fieldApps","golden","kinds","GoldenFieldApplication","editContext","createLegacyCommand","constructor","performAndRecord","perform","documentFactory","namespace","fieldApp","originPoint","systemXml","symmName","symmPer","getSymmetryPerspective","getDefaultSymmetryPerspective","ToolsModel","symmetrySystems","symmPerspectives","getSymmetryPerspectives","iterator","hasNext","perspective","next","osm","SymmetrySystem","getName","orbitSource","getSymmetry","getMatrices","orbitSetField","__interfaces","getGroup","getOrbits","getQuaternionSet","getQuaternionSymmetry","format","XmlSymmetryFormat","getFormat","initialize","HashMap","registerToolFactories","realizedModel","JsRealizedModel","selection","JsSelection","JsEditorModel","setEditorModel","createToolFactories","tools","BookmarkTool","Factory","createPredefinedTool","toolsXml","loadFromXml","shaperFactory","shapesName","getShapes","createEditFromXml","deserializeAndPerform","adapter","setAdapter","loadAndPerform","configureAndPerformEdit","JavaDomElement","localName","configure","legacyCommandFactory","gridPoints","JsAdapter","getZoneGrid","createParser","shapeResources","shapeName","orbitName","jsAF","man","JsManifestation","manifest","rm","RenderedManifestation","resetAttributes","getShape","getShapeId","toString","getVertexList","toArray","av","toRealVector","getTriangleFaces","getGuid","embedShape","positionAV","getLocationAV","embedInR3","quatIndex","getStrutZone","getColor","getRGB","createEditor","JavaDomNodeList","nodeList","nativeNodeList","node","nodeType","nativeElement","textContent","childNodes","firstElementChild","toLowerCase","nodeName","nextElementSibling","results","getLength","createDocument","domDoc","DOMParser","parseFromString","vZomeRoot","targetEdit","parseInt","currentEdit","editElement","performEdits","recordEdit","increment","outerHTML","sandbox","clone","wrappedElement","ActionCreators","undo","viewing","extIndex","lastIndexOf","substring","initialFields","requiredBundles","cheerpj","middleware","names","reducers","rootReducer","createStore","applyMiddleware","createBundleStore","thunk","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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GAAO,SACP,EAAM,GACL,CACD,GAAO,UACP,EAAM,EACN,EAAM,UACL,CACD,EAAM,EACN,GAAO,SACP,GAAO,WACN,CACD,GAAO,UACP,GAAO,SACP,GAAO,UACN,CACD,GAAO,SACP,GAAO,UACP,GAAO,UACN,CACD,GAAO,SACP,EAAM,EACN,GAAO,WACN,CACD,GAAO,SACP,GAAO,SACP,GAAO,WACN,CACD,EAAM,EACN,GAAO,UACP,GAAO,UACN,CACD,GAAO,SACP,EAAM,UACN,GAAO,UACN,CACD,GAAO,SACP,EAAM,SACN,EAAM,WACL,CACD,GAAO,SACP,EAAM,UACN,EAAM,GACL,CACD,GAAO,SACP,EAAM,SACN,GAAO,WACN,CACD,EAAM,SACN,EAAM,SACN,EAAM,WACL,CACD,EAAM,UACN,EAAM,SACN,EAAM,UACL,CACD,EAAM,SACN,EAAM,UACN,EAAM,UACL,CACD,EAAM,UACN,GAAO,SACP,GAAO,UACN,CACD,EAAM,SACN,GAAO,UACP,GAAO,UACN,CACD,EAAM,SACN,EAAM,SACN,GAAO,WACN,CACD,EAAM,SACN,EAAM,UACN,EAAM,GACL,CACD,EAAM,UACN,EAAM,SACN,EAAM,GACL,CACD,EAAM,UACN,GAAO,SACP,EAAM,UACL,CACD,EAAM,SACN,GAAO,UACP,EAAM,UACL,CACD,EAAM,SACN,EAAM,UACN,GAAO,UACN,CACD,EAAM,UACN,EAAM,SACN,GAAO,UACN,CACD,GAAO,SACP,GAAO,UACP,EAAM,UACL,CACD,GAAO,UACP,EAAM,SACN,GAAO,UACN,CACD,EAAM,EACN,EAAM,UACN,EAAM,UACL,CACD,EAAM,UACN,EAAM,EACN,GAAO,UACN,CACD,EAAM,UACN,EAAM,EACN,EAAM,UACL,CACD,EAAM,EACN,EAAM,SACN,GAAO,WACN,CACD,EAAM,SACN,EAAM,EACN,GAAO,WACN,CACD,EAAM,EACN,EAAM,UACN,GAAO,WAET,MAAU,CAAE,CACV,SAAa,CAAE,GAAI,GAAI,KACtB,CACD,SAAa,CAAE,GAAI,GAAI,KACtB,CACD,SAAa,CAAE,GAAI,GAA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","file":"static/js/main.9a10a83d.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","\n\nconst OBJECT_SELECTED = 'OBJECT_SELECTED'\nconst OBJECT_DESELECTED = 'OBJECT_DESELECTED'\nconst ALL_SELECTED = 'ALL_SELECTED'\nconst ALL_DESELECTED = 'ALL_DESELECTED'\nconst MESH_CHANGED = 'MESH_CHANGED'\n\nexport const objectSelected = ( id ) => ({ type: OBJECT_SELECTED, payload: id })\n\nexport const objectDeselected = ( id ) => ({ type: OBJECT_DESELECTED, payload: id })\n\nexport const selectionToggled = ( id, selected ) => selected? objectDeselected( id ) : objectSelected( id )\n\nexport const allSelected = () => ({ type: ALL_SELECTED })\n\nexport const allDeselected = () => ({ type: ALL_DESELECTED })\n\nexport const meshChanged = ( shown, selected, hidden ) => ({ type: MESH_CHANGED, payload: { shown, selected, hidden } })\n\nexport const justOrigin = field => {\n  const originBall = createInstance( [ field.origin( 3 ) ] )\n  const shown = new Map().set( originBall.id, originBall )\n  return {\n    shown,\n    selected: new Map(),\n    hidden: new Map(),\n    groups: []\n  }\n}\n\nconst initialState = {\n  shown: new Map(),\n  selected: new Map(), // This Map is especially important, so we iterate in insertion order\n  hidden: new Map(),\n  groups: []\n}\n\nconst canonicalizedId = ( vectors ) =>\n{\n  const strings = vectors.map( n => JSON.stringify( n ) )\n  let min = strings[ 0 ]\n  let minIndex = 0\n  for ( let i = 1; i < strings.length; i++ ) {\n    if ( strings[ i ].localeCompare( min ) < 0 ) {\n      minIndex = i\n      min = strings[ i ]\n    }\n  }\n  let sorted = \"\"\n  for ( let j = 0; j < strings.length; j++ ) {\n    sorted += strings[ ( minIndex + j ) % strings.length ]\n  }\n  return sorted\n}\n\nexport const createInstance = ( vectors ) =>\n{\n  const id = canonicalizedId( vectors )\n  // We cannot rearrange vectors, as that would break strut semantics for some legacy commands\n  return { id, vectors }\n}\n\nexport const reducer = ( state = initialState, action ) =>\n{\n  switch (action.type) {\n\n    case MESH_CHANGED: {\n      return { ...state, ...action.payload } // replace shown, selected, hidden, groups\n    }\n\n    case OBJECT_SELECTED: {\n      const id = action.payload\n      const obj = state.shown.get( id )\n      if ( typeof obj === \"undefined\" ) {\n        throw new Error( \"something went wrong\" )\n      }\n      const shown = new Map( state.shown )\n      shown.delete( id )\n      return {\n        ...state, shown,\n        selected: new Map( state.selected ).set( id, obj ),\n      }\n    }\n\n    case OBJECT_DESELECTED: {\n      const id = action.payload\n      const obj = state.selected.get( id )\n      if ( typeof obj === \"undefined\" ) {\n        throw new Error( \"something went wrong\" )\n      }\n      const selected = new Map( state.selected )\n      selected.delete( id )\n      return {\n        ...state, selected,\n        shown: new Map( state.shown ).set( id, obj ),\n      }\n    }\n\n    case ALL_SELECTED: {\n      return {\n        ...state,\n        shown: new Map(),\n        selected: new Map( [ ...state.selected, ...state.shown ] )\n      }\n    }\n\n    case ALL_DESELECTED: {\n      return {\n        ...state,\n        selected: new Map(),\n        shown: new Map( [ ...state.selected, ...state.shown ] )\n      }\n    }\n            \n    default:\n      return state\n  }\n}\n","\n\n// Most of this code is from Jacob Rus: https://observablehq.com/@jrus/zome-arithmetic\n\nconst PHI = 0.5 * (Math.sqrt(5) + 1)\n\nfunction grsign( a )\n{\n  const [a0=0, a1=0, ad=1] = a, float = a0 + PHI * a1\n  return ((ad>0)-(ad<0)) * ((float>0)-(float<0))\n}\n\nfunction gcd( a, b )\n{\n  a = Math.abs(a)\n  b = Math.abs(b)\n  while ( b !== 0 ) [a, b] = [b, a % b]\n  return a\n}\n\nfunction simplify3( v0, v1, v2 )\n{\n  if ((v0|0) !== v0 || (v1|0) !== v1 || (v2|0) !== v2)\n    throw new TypeError('simplify3 operates only on integers.')\n  let s0 = (v0>0)-(v0<0), s1 = (v1>0)-(v1<0), s2 = (v2>0)-(v2<0) // signs\n  v0 *= s0\n  v1 *= s1\n  v2 *= s2\n  s0 *= s2\n  s1 *= s2\n  const g = gcd(gcd(v0, v1), v2)\n  return [s0*v0/g, s1*v1/g, v2/g]\n}\n\nfunction reciprocal( a )\n{\n  const [a0=0, a1=0, ad=1] = a;\n  return simplify3( (a0 + a1)*ad, 0 - a1*ad, a0*a0 + a0*a1 - a1*a1 )\n}\n\n// from https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/random\nfunction getRandomInt( min, max )\n{\n  min = Math.ceil( min );\n  max = Math.floor( max );\n  return Math.floor( Math.random() * (max - min) + min ); //The maximum is exclusive and the minimum is inclusive\n}\n\nfunction times( a, b )\n{\n  const [ a0=0, a1=0, ad=1] = a, [b0=0, b1=0, bd=1 ] = b\n  return simplify3( a0*b0 + a1*b1, a0*b1 + a1*b0 + a1*b1, ad*bd )\n}\n\nfunction plus( a, b )\n{\n  const [ a0=0, a1=0, ad=1] = a, [b0=0, b1=0, bd=1 ] = b\n  return simplify3( a0*bd + b0*ad, a1*bd + b1*ad, ad*bd )\n}\n\nfunction minus( a, b )\n{\n  const [ a0=0, a1=0, ad=1] = a, [b0=0, b1=0, bd=1 ] = b\n  return simplify3( a0*bd - b0*ad, a1*bd - b1*ad, ad*bd )\n}\n\nfunction scalarmul( s, v )\n{\n  return [ ...v.values() ].map( ( vi=[0] ) => times( s, vi ) )\n}\n\nfunction negate( a )\n{\n  const [ a0=0, a1=0, ad=1 ] = a\n  return [ 0 - a0, 0 - a1, ad ]\n}\n\nfunction vectoradd( u, v )\n{\n  return [ ...u.values() ].map( ( ui=[0], i ) => plus( ui, v[i] || [0] ) )\n}\n\nfunction embed( a )\n{\n  const [ a0=0, a1=0, ad=1 ] = a\n  return ( a0 + PHI * a1 ) / ad\n}\n\nfunction createRationalFromPairs( pairs )\n{\n  const [ a0=0, d0=1, a1=0, d1=1 ] = pairs\n  return simplify3( a0*d1, a1*d0, d0*d1 )\n}\n\nfunction quatmul( u, v )\n{\n  const x = times, a = plus, s = minus,\n    [u0=[0], u1=[0], u2=[0], u3=[0]] = u,\n    [v0=[0], v1=[0], v2=[0], v3=[0]] = v\n  return [\n    s(x(u0, v0), a(a(x(u1, v1), x(u2, v2)), x(u3, v3))),\n    a(a(x(u0, v1), x(u1, v0)), s(x(u2, v3), x(u3, v2))),\n    a(a(x(u0, v2), x(u2, v0)), s(x(u3, v1), x(u1, v3))),\n    a(a(x(u0, v3), x(u3, v0)), s(x(u1, v2), x(u2, v1)))]\n}\n\n// Everything here uses a W-first representation of quaternions.\n//   These quaternions must be transformed to W-last when using with three.js.\n\nfunction quatconj( [u0=[0], u1=[0], u2=[0], u3=[0]] )\n{\n  return [ u0, negate(u1), negate(u2), negate(u3) ]\n}\n\nfunction quatTransform( Q, v )\n{\n  return quatmul( Q, quatmul( [[0]].concat(v), quatconj(Q)) ).slice(1)\n}\n\nfunction quatnormalize(q)\n{\n  return scalarmul( [ q.map( grsign ).reduce( (a, b) => a || b ) || 1 ], q )\n}\n\nconst one = [[1],,,], h = [1,,2], blue = [one, [,[1],,], [,,,[1]], [,,[1],]],\n  yellow = [one, [h, h, h, h], [[-1,,2], h, h, h]], red = [one, [[,1,2], h, [-1,1,2],]]\nfor ( let i = 2; i < 5; i++ )\n  red[i] = quatmul( red[i-1], red[1] )\nconst vZomeIcosahedralQuaternions = []; let b, r, y\nfor (b of blue) for (r of red) for (y of yellow)\n  vZomeIcosahedralQuaternions.push( quatnormalize( quatmul( b, quatmul( y, r ) ) ) )\n\n\n// All of this code for goldenSeries, etc. came from https://observablehq.com/@vorth/finding-golden-numbers\n\nconst replacement = item => (item === \"1\")? [ \"\" ] : [ \"1\", \"\" ]\n\nconst symbolSequence = ( depth ) =>\n{\n  function recurrence( arr ){\n    return arr.reduce( (acc, item) => {\n      return [ ...acc, ...replacement( item ) ]\n    }, [] )\n  }\n  var seq = [ \"1\" ]\n  for (var i = 0; i < depth; i++) {\n    seq = recurrence( seq )\n  }\n  return seq\n}\n\nconst goldenSequence = ( depth ) =>\n{\n  return symbolSequence( depth ).map( symbol => ( ( symbol === \"1\" )? [1,0,1] : [0,1,1] ) )\n}\n\nconst goldenSeries = ( depth ) =>\n{\n  return goldenSequence( depth ).reduce( function( r, a ) {\n    if (r.length > 0)\n      a = plus( a, r[r.length - 1] );\n    r.push( a );\n    return r;\n  }, [])\n}\n\nconst origin = dimensions =>\n{\n  const result = []\n  for ( let index = 0; index < dimensions; index++ ) {\n    result.push( [ 0, 0, 1 ] )\n  }\n  return result\n}\n\n\nexport default {\n\n  name: 'golden',\n\n  order: 2,\n\n  zero: [ 0, 0, 1 ],\n  one: [ 1, 0, 1 ],\n  goldenRatio: [ 0, 1, 1 ],\n\n  quaternions: vZomeIcosahedralQuaternions,\n\n  goldenSeries,\n\n  origin,\n\n  plus, minus, times, scalarmul, vectoradd, embed, reciprocal, negate, createRationalFromPairs, quatTransform,\n\n  embedv: (v) => v.map( embed ),\n\n  createRational: ( n, d ) =>\n  {\n    return simplify3( n, 0, d )\n  },\n\n  randomVector: () =>\n  {\n    const x = [ getRandomInt( -12, 12 ), 0, 1 ]\n    const y = [ getRandomInt( -12, 12 ), 0, 1 ]\n    const z = [ getRandomInt( -12, 12 ), 0, 1 ]\n    return [ x, y, z ]\n  }\n}\n","\n\nconst CAMERA_DEFINED = 'CAMERA_DEFINED'\n\nconst aspectRatio = window.innerWidth / window.innerHeight\nconst convertFOV = (fovX) => ( fovX / aspectRatio ) * 180 / Math.PI  // converting radians to degrees\n\nconst vZomeInitialState = {  // These values match the camera in the default vZomeLogo model file\n  fov: convertFOV( 0.442 ),\n  position: [ -23.6819, 12.3843, -46.8956 ],\n  lookAt: [ 0, -3.4270, 5.5450 ],\n  up: [ -0.8263, 0.3136, 0.4677 ],\n  far: 119.34,\n  near: 0.1491,\n}\n\nexport const initialState = {  // These values match the camera in the default vZomeLogo model file\n  fov: convertFOV( 0.442 ),\n  position: [ 0, 0, 75 ],\n  lookAt: [ 0, 0, 0 ],\n  up: [ 0, 1, 0 ],\n  far: 217.46,\n  near: 0.271,\n}\n\nexport const reducer = ( state = initialState, action ) => {\n  switch (action.type) {\n\n    case CAMERA_DEFINED:\n      const { position, lookAtPoint, upDirection, fieldOfView, nearClipDistance, farClipDistance } = action.payload\n      return {\n        position: [ ...Object.values( position ) ],\n        lookAt: [ ...Object.values( lookAtPoint ) ],\n        up: [ ...Object.values( upDirection ) ],\n        fov: convertFOV( fieldOfView ),\n        near: nearClipDistance,\n        far: farClipDistance\n      }\n\n    default:\n      return state\n  }\n}\n\nexport const parseViewXml = ( viewingElement ) =>\n{\n  const parseVector = ( element, name ) =>\n  {\n    const child = element.getChildElement( name )\n    const x = parseFloat( child.getAttribute( \"x\" ) )\n    const y = parseFloat( child.getAttribute( \"y\" ) )\n    const z = parseFloat( child.getAttribute( \"z\" ) )\n    return { x, y, z }\n  }\n  const viewModel = viewingElement.getChildElement( \"ViewModel\" )\n  const distance = parseFloat( viewModel.getAttribute( \"distance\" ) )\n  const nearClipDistance = parseFloat( viewModel.getAttribute( \"near\" ) )\n  const farClipDistance = parseFloat( viewModel.getAttribute( \"far\" ) )\n  const lookAtPoint = parseVector( viewModel, \"LookAtPoint\" )\n  const upDirection = parseVector( viewModel, \"UpDirection\" )\n  const lookDirection = parseVector( viewModel, \"LookDirection\" )\n  const x = lookAtPoint.x - distance * lookDirection.x\n  const y = lookAtPoint.y - distance * lookDirection.y\n  const z = lookAtPoint.z - distance * lookDirection.z\n  const position = { x, y, z }\n  const payload = {\n    position, lookAtPoint, upDirection, fieldOfView: 0.442, nearClipDistance, farClipDistance\n  }\n  return { type: CAMERA_DEFINED, payload }\n}","\nimport { combineReducers } from 'redux'\nimport undoable from 'redux-undo'\n\nimport goldenField from '../fields/golden'\nimport * as mesh from './mesh'\nimport * as camera from './camera'\n\nexport const designReducer = combineReducers( {\n  history: undoable( combineReducers( {\n    mesh: mesh.reducer,\n    // TODO: add current command\n  } ) ),\n  fieldName: ( state=\"\", action ) => state, // fieldName cannot be changed, so a constant reducer is fine\n  shaperName: ( state=\"\", action ) => state, // shaperName cannot be changed (YET!), so a constant reducer is fine\n  camera: camera.reducer,\n})\n\nexport const initializeDesign = ( field, shaperName ) => ({\n  history: {\n    past: [],\n    present: {\n      mesh: mesh.justOrigin( field ),\n    },\n    future: [],\n  },\n  fieldName: field.name,\n  shaperName,\n  camera: camera.initialState,\n})\n\nconst emptyState = {\n  nextUntitledIndex: 0,\n  data: {},\n}\n\nconst addNewModel = ( state, field ) =>\n{\n  const name = `untitled ${field.name} ${state.nextUntitledIndex}`\n  return {\n    nextUntitledIndex: state.nextUntitledIndex + 1,\n    current: name,\n    data: {\n      ...state.data,\n      [ name ]: initializeDesign( field )\n    }\n  }\n}\n\nexport const newModel = field => ( { type: 'NEW_MODEL', payload: field } )\n\nexport const switchModel = name => ( { type: 'SWITCH_MODEL', payload: name } )\n\nexport const renameModel = name => ( { type: 'RENAME_MODEL', payload: name } )\n\nexport const loadedDesign = ( name, design ) => ( { type: 'LOADED_DESIGN', payload: { name, design } } )\n\nexport const selectCurrentDesign = state => state.models.data[ state.models.current ]\n\nexport const selectCurrentMesh = state => selectCurrentDesign( state ).history.present.mesh\n\nexport const selectCurrentCamera = state => selectCurrentDesign( state ).camera\n\nexport const selectCurrentField = state => state.fields[ selectCurrentDesign( state ).fieldName ]\n\nexport const selectCurrentShaper = state =>\n{\n  const shaperName = selectCurrentDesign( state ).shaperName || \"solid connectors\"\n  return state.shapers[ shaperName ]\n}\n\nexport const reducer = ( state = addNewModel( emptyState, goldenField ), action ) =>\n{\n  switch ( action.type ) {\n\n    case 'NEW_MODEL':\n      return addNewModel( action.payload )\n  \n    case 'CLOSE_MODEL':\n      return state;\n\n    case 'SWITCH_MODEL': {\n      const name = action.payload\n      return {\n        ...state,\n        current: name,\n      }\n    }\n\n    case 'LOADED_DESIGN': {\n      const { name, design } = action.payload\n      return {\n        ...state,\n        current: name,\n        data: {\n          ...state.data,\n          [ name ]: design\n        }\n      }\n    }\n\n    case 'RENAME_MODEL': {\n      const oldName = state.current\n      const name = action.payload\n      const model = state.data[ oldName ]\n      delete state.data[ oldName ]\n      return {\n        ...state,\n        current: name,\n        data: {\n          ...state.data,\n          [ name ]: model\n        }\n      }\n    }\n\n    default:\n      // All other actions are funneled only to the current design; we don't\n      //  want any changes to affect all designs simultaneously.\n      const modelState = state.data[ state.current ]\n      if ( modelState ) {\n        return {\n          ...state,\n          data: {\n            ...state.data,\n            [ state.current ]: designReducer( modelState, action )\n          }\n        }\n      } else {\n        return state\n      }\n  }\n}","\nimport * as mesh from '../bundles/mesh'\nimport * as designs from '../bundles/models'\n\nexport default ( start, end ) => ( dispatch, getState ) =>\n{\n  let { shown, hidden, selected } = designs.selectCurrentMesh( getState() )\n  shown = new Map( shown )\n  hidden = new Map( hidden )\n  selected = new Map( selected )\n\n  let newBall = mesh.createInstance( [ end ] ) // canonically, all mesh objects are arrays of vectors\n\n  // Avoid creating a duplicate... make this reusable\n  newBall = shown.get( newBall.id ) || selected.get( newBall.id ) || hidden.get( newBall.id ) || newBall\n  selected.delete( newBall.id ) || hidden.delete( newBall.id )\n  shown.set( newBall.id, newBall )\n\n  if ( start ) {\n    let newStrut = mesh.createInstance( [ start, end ] )\n    newStrut = shown.get( newStrut.id ) || selected.get( newStrut.id ) || hidden.get( newStrut.id ) || newStrut\n    selected.delete( newStrut.id ) || hidden.delete( newStrut.id )\n    shown.set( newStrut.id, newStrut )\n  }\n\n  dispatch( mesh.meshChanged( shown, selected, hidden ) )\n}","\nimport goldenField from '../fields/golden'\nimport buildStrut from '../commands/buildstrut'\n\nexport const doStartGridHover = position =>\n{\n  return { type: 'GRID_HOVER_STARTED', payload: position }\n}\n\nexport const doStopGridHover = position =>\n{\n  return { type: 'GRID_HOVER_STOPPED', payload: position }\n}\n\nexport const doStartBallHover = position =>\n{\n  return { type: 'BALL_HOVER_STARTED', payload: position }\n}\n\nexport const doStopBallHover = position =>\n{\n  return { type: 'BALL_HOVER_STOPPED', payload: position }\n}\n\nexport const doBallClick = ( focus, position ) => ( dispatch, getState ) =>\n{\n  dispatch( { type: 'BALL_CLICKED', payload: position } )\n  dispatch( buildStrut( focus, position ) )\n}\n\nexport const doBackgroundClick = () =>\n{\n  return { type: 'BACKGROUND_CLICKED' }\n}\n\nexport const doSetWorkingPlaneGrid = grid => {\n  return { type:'WORKING_PLANE_GRID_DEFINED', payload: grid }\n}\n\nexport const doChangeOrientation =() => {\n  return { type:'ORIENTATION_CHANGED' }\n}\n\nconst series = goldenField.goldenSeries( 6 ).map( n => goldenField.times( goldenField.goldenRatio, n ) )\n\nconst zero = goldenField.zero\nconst grid = [ [ zero, zero ] ]\n\nseries.forEach( x => {\n  const nx = goldenField.negate( x )\n  grid.push( [ x, zero ] )\n  grid.push( [ zero, x ] )\n  grid.push( [ nx, zero ] )\n  grid.push( [ zero, nx ] )\n  series.forEach( y => {\n    const ny = goldenField.negate( y )\n    grid.push( [ x, y ] )\n    grid.push( [ x, ny ] )\n    grid.push( [ nx, y ] )\n    grid.push( [ nx, ny ] )\n  });  \n});\n\nconst initialState = {\n  position: [ goldenField.zero, goldenField.zero, goldenField.zero ],\n  endPt: undefined,\n  quaternion: goldenField.quaternions[ 0 ],\n  size: goldenField.times( [5,0,1], goldenField.goldenRatio ),\n  grid: [],\n  color: \"#00aacc\",\n  enabled: false,\n  buildingStruts: false,\n  field: goldenField\n}\n\nexport const reducer = ( state=initialState, action ) =>\n{\n  switch ( action.type )\n  {\n    case 'GRID_HOVER_STARTED':\n      return { ...state, endPt: action.payload }\n          \n    case 'BALL_HOVER_STARTED':\n      if ( state.endPt )\n        return state\n      else\n        return { ...state, endPt: action.payload }\n  \n    case 'BALL_HOVER_STOPPED':\n      return { ...state, endPt: undefined }\n        \n    case 'BALL_CLICKED':\n      const target = action.payload\n      if ( JSON.stringify( state.position ) === JSON.stringify( target ) )\n        return { ...state, enabled: true, buildingStruts: !state.buildingStruts, endPt: undefined }\n      else\n        return { ...state, enabled: true, buildingStruts: true, position: target, endPt: undefined }\n    \n    // not generated yet, so untested\n    case 'BACKGROUND_CLICKED':\n      return { ...state, enabled: !state.enabled }\n    \n    case 'WORKING_PLANE_GRID_DEFINED':\n      return { ...state, enabled: true, buildingStruts: true, grid: action.payload }\n\n    case 'ORIENTATION_CHANGED':\n      return { ...state, enabled: true, orientation: (state.orientation+1)%3 }\n\n    default:\n      return state\n  }\n}\n","import React from 'react'\nimport * as THREE from 'three'\nimport { useResource } from 'react-three-fiber'\n\nfunction BuildPlane( { config, startGridHover, stopGridHover } )\n{\n  const { position, quaternion, grid, color, size, field } = config\n  const [ materialRef, material ] = useResource()\n  const rsize = field.embed( size )\n  const dotSize = rsize / 24\n  \n  const makeAbsolute = ( gridPt ) =>\n  {\n    let vector3d = field.quatTransform( quaternion, [ ...gridPt, field.zero ] )\n    return field.vectoradd( position, vector3d )\n  }\n  const handleHoverIn = ( e, gridPt ) =>\n  {\n    e.stopPropagation()\n    startGridHover( makeAbsolute( gridPt ) )\n  }\n  const handleHoverOut = ( e, gridPt ) =>\n  {\n    e.stopPropagation()\n    stopGridHover( makeAbsolute( gridPt ) )\n  }\n  const handleClick = ( e, gridPt ) =>\n  {\n    e.stopPropagation()\n    console.log( \"handle grid click: \" + JSON.stringify( gridPt ) )\n  }\n  const wlast = q =>\n  {\n    const [ w, x, y, z ] = q\n    return [ x, y, z, w ]\n  }\n  \n  return (\n    <group position={field.embedv( position )} quaternion={field.embedv( wlast( quaternion ) )}>\n      <meshLambertMaterial ref={materialRef} transparent={true} opacity={0.7} color={color} side={THREE.DoubleSide} />\n      {grid.map( ( gv ) => {\n        const [ x, y, z ] = field.embedv( gv ) \n        return (\n          <mesh position={[x,y,z]} key={JSON.stringify( gv )} material={material}\n              onPointerOver={ e => handleHoverIn( e, gv ) }\n              onPointerOut={ e => handleHoverOut( e, gv ) }\n              onClick={ e => handleClick( e, gv ) }>\n            <icosahedronBufferGeometry attach=\"geometry\" args={[dotSize]} />\n          </mesh>\n        )}) }\n    </group>\n  )\n}\n\nexport default BuildPlane\n","import * as THREE from 'three'\nimport React, { useMemo } from 'react'\n\nconst computeNormal = ( vertices, face ) => {\n  const v0 = vertices[ face.vertices[0] ]\n  const v1 = vertices[ face.vertices[1] ]\n  const v2 = vertices[ face.vertices[2] ]\n  const e1 = new THREE.Vector3().subVectors( v1, v0 )\n  const e2 = new THREE.Vector3().subVectors( v2, v0 )\n  return new THREE.Vector3().crossVectors( e1, e2 )\n}\n\nconst createGeometry = ( { vertices, faces } ) =>\n{\n  var geometry = new THREE.Geometry();\n  geometry.vertices = vertices.map( v => new THREE.Vector3( v.x, v.y, v.z ) )\n  geometry.faces = faces.map( f => new THREE.Face3( f.vertices[0], f.vertices[1], f.vertices[2], computeNormal( vertices, f ) ) )\n  geometry.computeBoundingSphere();\n  return geometry\n}\n\nconst Instance = ( { id, vectors, position, rotation, geometry, color, selected, highlightBall, onClick, onHover } ) =>\n{\n  const handleHoverIn = ( e ) =>\n  {\n    e.stopPropagation()\n    onHover( vectors, true )\n  }\n  const handleHoverOut = ( e ) =>\n  {\n    e.stopPropagation()\n    onHover( vectors, false )\n  }\n  const handleClick = ( e ) =>\n  {\n    if ( onClick ) { // may be undefined when the model is not editable, or when the object is not clickable in the current mode\n      e.stopPropagation()\n      onClick( id, vectors, selected )\n    }\n  }\n  const emissive = selected? \"#bbbbbb\" : highlightBall( id )? \"#884444\" : \"black\"\n  // TODO: cache materials\n  return (\n    <group position={ position } quaternion={ rotation }>\n      <mesh geometry={geometry} onPointerOver={handleHoverIn} onPointerOut={handleHoverOut} onClick={handleClick}>\n        <meshLambertMaterial attach=\"material\" color={color} emissive={emissive} />\n      </mesh>\n    </group>\n  )\n}\n\nconst InstancedShape = ( { instances, shape, onClick, onHover, highlightBall } ) =>\n{\n  const geometry = useMemo( () => createGeometry( shape ), [ shape ] )\n  return (\n    <>\n      { instances.map( instance => \n        <Instance key={instance.id} {...instance} geometry={geometry} highlightBall={highlightBall} onClick={onClick} onHover={onHover} /> ) }\n    </>\n  )\n}\n\nconst shapeInstance = ( instance, selected, field, shapedInstances, resolve ) =>\n{\n  // TODO: handle undefined result from resolve\n  let shapedInstance = shapedInstances[ instance.id ]\n  if ( shapedInstance && ( instance.color === shapedInstance.color ) ) {\n    return { ...shapedInstance, selected }\n  }\n  shapedInstance = resolve( instance )\n  // everything except selected state will go into shapedInstances\n  shapedInstance = { ...shapedInstance, vectors: instance.vectors }\n  shapedInstances[ instance.id ] = shapedInstance\n  return { ...shapedInstance, selected }\n}\n\nconst filterInstances = ( shape, instances ) =>\n{\n  return instances.filter( instance => instance.shapeId === shape.id )\n}\n\nconst Geometry = ({ mesh, field, resolver, preResolved, highlightBall, handleClick, onHover }) =>\n{\n  const shapes = useMemo( () => ( preResolved && preResolved.shapes ) || {}, [ resolver, preResolved ] )\n  const shapedInstances = useMemo( () => ({}), [ resolver ] )\n  const instances = ( preResolved && preResolved.instances ) || []\n  if ( resolver ) {\n    // resolver won't be available until the JSweet init has dispatched ORBITS_INITIALIZED\n    const resolve = resolver( shapes )\n    // TODO: this breaks encapsulation of the mesh state; fix it\n    mesh.shown.forEach( instance => instances.push( shapeInstance( instance, false, field, shapedInstances, resolve ) ) )\n    mesh.selected.forEach( instance => instances.push( shapeInstance( instance, true, field, shapedInstances, resolve ) ) )\n  }\n  const sortByShape = () => Object.values( shapes ).map( shape => ( { shape, instances: filterInstances( shape, instances ) } ) )\n  const sortedInstances = useMemo( sortByShape, [ shapes, instances ] )  // When !preRendered, instances will change every render\n  return (\n    <>\n      { sortedInstances.map( ( { shape, instances } ) =>\n        <InstancedShape key={shape.id} shape={shape} instances={instances} highlightBall={highlightBall} onClick={handleClick} onHover={onHover} />\n      ) }\n    </>\n  )\n}\n\nexport default Geometry\n\n","\nimport React, { useRef, useMemo } from 'react'\nimport { connect } from 'react-redux'\nimport { Canvas, useThree, extend, useFrame } from 'react-three-fiber'\nimport * as THREE from 'three'\nimport { PerspectiveCamera } from 'drei'\nimport { TrackballControls } from 'three/examples/jsm/controls/TrackballControls'\nimport { selectionToggled } from '../bundles/mesh'\nimport * as planes from '../bundles/planes'\nimport BuildPlane from './buildplane'\nimport Geometry from './geometry'\nimport { createInstance } from '../bundles/mesh'\nimport * as designs from '../bundles/models'\n\nextend({ TrackballControls })\nconst Controls = props => {\n  const { gl, camera } = useThree()\n  const controls = useRef()\n  useFrame(() => controls.current.update())\n  return <trackballControls ref={controls} args={[camera, gl.domElement]} {...props} />\n}\n\n// Found this trick for getting the DL.target into the scene here:\n//   https://spectrum.chat/react-three-fiber/general/how-to-set-spotlight-target~823340ea-433e-426a-a0dc-b9a333fc3f94\nconst DirLight = ( { direction, color } ) =>\n{\n  const position = direction.map( x => -x )\n  const light = useMemo(() => new THREE.DirectionalLight(), [])\n  return (\n    <>\n      <primitive object={light} position={position} color={color} />\n      <primitive object={light.target} position={[0,0,0]}  />\n    </>\n  )\n}\n\nconst Lighting = ( { backgroundColor, ambientColor, directionalLights } ) => {\n  const color = useMemo(() => new THREE.Color( backgroundColor ), [backgroundColor])\n  useFrame( ({scene}) => { scene.background = color } )\n  return (\n    <>\n      <ambientLight color={ambientColor} />\n      { directionalLights.map( ( config ) => <DirLight {...config} /> ) }\n    </>\n  )\n}\n\nconst isLeftMouseButton = e =>\n{\n  e = e || window.event;\n  if ( \"which\" in e )  // Gecko (Firefox), WebKit (Safari/Chrome) & Opera\n    return e.which === 1\n  else if ( \"button\" in e )  // IE, Opera \n    return e.button === 0\n  return false\n}\n\n/*\nTODO:\n  - lighting component extract (Redux context tunneling)\n*/\n\n// Thanks to Paul Henschel for this, to fix the camera.lookAt by adjusting the Controls target\n//   https://github.com/react-spring/react-three-fiber/discussions/609\n\nconst ModelCanvas = ( { lighting, camera, mesh, field, resolver, preResolved, clickable, selectionToggler,\n                        startGridHover, stopGridHover, startBallHover, stopBallHover, shapeClick, bkgdClick, workingPlane } ) => {\n  const { fov, position, up, lookAt } = camera\n  const focus = workingPlane && workingPlane.enabled && workingPlane.buildingStruts && workingPlane.position\n  const atFocus = id => focus && ( id === JSON.stringify(focus) )\n  const handleClick = clickable && (( id, vectors, selected ) =>\n  {\n    if ( workingPlane ) {\n      if ( vectors.length === 1 )\n        shapeClick( focus, vectors[ 0 ] )\n    }\n    else {\n      selectionToggler( id, selected )\n    }\n  })\n  const handleBackgroundClick = ( e ) =>\n  {\n    workingPlane && isLeftMouseButton( e ) && bkgdClick()\n  }\n  const onHover = ( vectors, inbound ) =>\n  {\n    if ( workingPlane && vectors.length === 1 ) {\n      const position = vectors[ 0 ]\n      inbound? startBallHover( position ) : stopBallHover( position )\n    }\n  }\n  return(\n      <Canvas gl={{ antialias: true, alpha: false }} onPointerMissed={handleBackgroundClick} >\n        <PerspectiveCamera makeDefault {...{fov, position, up}}>\n          <Lighting {...lighting} />\n        </PerspectiveCamera>\n        <Controls staticMoving='true' rotateSpeed={6} zoomSpeed={3} panSpeed={1} target={lookAt} />\n        <Geometry {...{ mesh, field, resolver, preResolved, handleClick, onHover, highlightBall: atFocus }} />\n        {workingPlane && workingPlane.enabled &&\n          <BuildPlane config={workingPlane} { ...{ startGridHover, stopGridHover } } />}\n      </Canvas>\n  )\n}\n\nconst select = ( state ) =>\n{\n  const { lighting, models, workingPlane, java } = state\n  const mesh = models && designs.selectCurrentMesh( state )\n  const field = models && designs.selectCurrentField( state )\n  const camera = state.camera || designs.selectCurrentCamera( state )\n  const resolver = models && designs.selectCurrentShaper( state )\n  const preResolved = java.shapes && { shapes: java.shapes, instances: java.renderingOn? java.instances : java.previous }\n  const shown = mesh && new Map( mesh.shown )\n  if ( workingPlane && workingPlane.enabled && workingPlane.endPt ) {\n    const { position, endPt, buildingStruts } = workingPlane\n    let previewBall = createInstance( [ endPt ] )\n    if ( ! shown.has( previewBall.id ) )\n      shown.set( previewBall.id, previewBall )\n    if ( buildingStruts ) {\n      let previewStrut = createInstance( [ position, endPt ] )\n      if ( ! shown.has( previewStrut.id ) )\n        shown.set( previewStrut.id, previewStrut )\n    }\n  }\n  return {\n    workingPlane,\n    camera,\n    lighting,\n    field,\n    resolver,\n    preResolved,\n    mesh: mesh && { ...mesh, shown },\n    clickable: !!models\n  }\n}\n\nconst boundEventActions = {\n  selectionToggler : selectionToggled,\n  startGridHover: planes.doStartGridHover,\n  stopGridHover: planes.doStopGridHover,\n  startBallHover: planes.doStartBallHover,\n  stopBallHover: planes.doStopBallHover,\n  shapeClick: planes.doBallClick,\n  bkgdClick: planes.doBackgroundClick,\n}\n\nexport default connect( select, boundEventActions )( ModelCanvas )\n","\nconst ERROR_HAPPENED = 'ERROR_HAPPENED'\nconst ERROR_CLEARED = 'ERROR_CLEARED'\n\nexport const showAlert = ( message ) =>\n{\n  return { type: ERROR_HAPPENED, payload: message }\n}\n\nexport const clearAlert = () =>\n{\n  return { type: ERROR_CLEARED }\n}\n\nexport const reducer = ( state = '', action ) => {\n  switch (action.type) {\n\n    case ERROR_HAPPENED:\n      return action.payload\n\n    case ERROR_CLEARED:\n      return ''\n\n    default:\n      return state\n  }\n}\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport { clearAlert } from '../bundles/alerts'\nimport { Alert, AlertTitle } from '@material-ui/lab';\nimport Snackbar from '@material-ui/core/Snackbar';\n\n\nconst ErrorAlert = ( { message, dismissed } ) =>\n{\n  return (\n    <Snackbar open={!!message} onClose={dismissed}\n        anchorOrigin={{ vertical: 'top', horizontal: 'center' }}>\n      <Alert variant='filled' severity=\"error\" onClose={dismissed}>\n        <AlertTitle>There's a problem</AlertTitle>\n        {message}\n      </Alert>\n    </Snackbar>\n  )\n}\n\nconst select = (state) => ({\n  message: state.alerts\n})\n\nconst boundEventActions = {\n  dismissed : clearAlert\n}\n\nexport default connect( select, boundEventActions )( ErrorAlert )\n","\nimport React from 'react'\nimport { connect } from 'react-redux'\n\nimport Backdrop from '@material-ui/core/Backdrop';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Typography from '@material-ui/core/Typography'\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles((theme) => ({\n  backdrop: {\n    zIndex: theme.zIndex.drawer + 1,\n    color: '#fff',\n  },\n}));\n\nexport const Spinner = ( { visible, message } ) =>\n{\n  const classes = useStyles();\n  return (\n    <Backdrop className={classes.backdrop} open={visible}>\n      <CircularProgress color=\"inherit\" />\n      {/* <Typography variant=\"h2\">{message}</Typography> */}\n    </Backdrop>\n  );\n}\n\nconst select = ( { progress } ) => ({\n  visible: progress && progress.showing,\n  message: progress && progress.message\n})\n\nexport default connect( select )( Spinner )\n","\nimport React from 'react';\nimport { withStyles } from '@material-ui/core/styles'\nimport Button from '@material-ui/core/Button'\nimport Dialog from '@material-ui/core/Dialog'\nimport MuiDialogTitle from '@material-ui/core/DialogTitle'\nimport MuiDialogContent from '@material-ui/core/DialogContent'\nimport MuiDialogActions from '@material-ui/core/DialogActions'\nimport IconButton from '@material-ui/core/IconButton'\nimport CloseIcon from '@material-ui/icons/Close'\nimport Typography from '@material-ui/core/Typography'\nimport InfoRoundedIcon from '@material-ui/icons/InfoRounded'\nimport Link from '@material-ui/core/Link'\nimport Tooltip from '@material-ui/core/Tooltip'\n\nconst styles = (theme) => ({\n  root: {\n    margin: 0,\n    padding: theme.spacing(2),\n  },\n  closeButton: {\n    position: 'absolute',\n    right: theme.spacing(1),\n    top: theme.spacing(1),\n    color: theme.palette.grey[500],\n  },\n})\n\nconst DialogTitle = withStyles(styles)((props) => {\n  const { children, classes, onClose, ...other } = props;\n  return (\n    <MuiDialogTitle disableTypography className={classes.root} {...other}>\n      <Typography variant=\"h6\">{children}</Typography>\n      {onClose ? (\n        <IconButton aria-label=\"close\" className={classes.closeButton} onClick={onClose}>\n          <CloseIcon />\n        </IconButton>\n      ) : null}\n    </MuiDialogTitle>\n  )\n})\n\nconst DialogContent = withStyles((theme) => ({\n  root: {\n    padding: theme.spacing(2),\n  },\n}))(MuiDialogContent)\n\nconst DialogActions = withStyles((theme) => ({\n  root: {\n    margin: 0,\n    padding: theme.spacing(1),\n  },\n}))(MuiDialogActions)\n\nexport default function AboutDialog() {\n  const [open, setOpen] = React.useState(false);\n\n  const handleClickOpen = () => {\n    setOpen(true)\n  }\n  const handleClose = () => {\n    setOpen(false)\n  }\n\n  return (\n    <>\n      <Tooltip title=\"About vZome Online\" aria-label=\"about\">\n        <IconButton color=\"inherit\" aria-label=\"about\" onClick={handleClickOpen}>\n          <InfoRoundedIcon fontSize=\"large\"/>\n        </IconButton>\n      </Tooltip>\n      <Dialog onClose={handleClose} aria-labelledby=\"customized-dialog-title\" open={open}>\n        <DialogTitle id=\"customized-dialog-title\" onClose={handleClose}>\n          About vZome Online\n        </DialogTitle>\n        <DialogContent dividers>\n          <Typography gutterBottom>\n            vZome Online is the world's first in-browser modeling tool\n            for <Link target=\"_blank\" href=\"https://zometool.com\" rel=\"noopener\" >Zometool</Link>\n            ... or it will be soon.\n          </Typography>\n          <Typography gutterBottom>\n            Right now, you can load and view existing vZome designs, created using\n            the <Link target=\"_blank\" rel=\"noopener\" href=\"https://vzome.com\">vZome desktop app</Link>.\n            Click on the folder icon try out some of the built-in designs, or load one of your own!\n          </Typography>\n          <Typography gutterBottom>\n            At the moment, you cannot modify designs or create new designs.  I'm working to complete those features\n            (and all the other features of desktop vZome)\n            as soon as possible;\n            my top priority so far has been to support loading existing designs.\n            If you want to stay informed about my progress, follow vZome\n            on <Link target=\"_blank\" rel=\"noopener\" href=\"https://www.facebook.com/vZome\">Facebook</Link> or <Link target=\"_blank\" rel=\"noopener\" href=\"https://twitter.com/vZome\">Twitter</Link>.\n          </Typography>\n          <Typography gutterBottom>\n            Not all vZome designs will load successfully yet, unfortunately.\n            It turns out to be a long and painstaking process to port all of the vZome\n            code to the web, and I still have some work to do.\n            If you have a vZome design (in the golden field) that does not load\n            here, <Link target=\"_blank\" rel=\"noopener\" href=\"mailto:info@vzome.com\">send me the vZome file</Link>,\n            and I can prioritize the necessary fixes.\n          </Typography>\n        </DialogContent>\n        {/* <DialogActions>\n          <Button autoFocus onClick={handleClose} color=\"primary\">\n            Download vZome Desktop App\n          </Button>\n        </DialogActions> */}\n      </Dialog>\n    </>\n  )\n}\n","\nimport React, { useState } from 'react'\nimport TextField from '@material-ui/core/TextField';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Button from '@material-ui/core/Button';\n\nexport default ({ show, setShow, openDesign }) =>\n{\n  const [url, setUrl] = useState( '' )\n\n  const handleCancel = () =>{\n    setShow( false )\n  }\n  const handleOpen = () =>{\n    setShow( false )\n    openDesign( url )\n  }\n  const handleChange = (event) => setUrl( event.target.value )\n\n  return (\n    <Dialog open={show} onClose={handleCancel} aria-labelledby=\"form-dialog-title\" maxWidth='lg' fullWidth={true}>\n      <DialogTitle id=\"form-dialog-title\">Load a Remote vZome Design</DialogTitle>\n      <DialogContent>\n        <DialogContentText>\n          The server must allow cross-origin access.\n        </DialogContentText>\n        <TextField onChange={handleChange}\n          autoFocus\n          margin=\"dense\"\n          id=\"name\"\n          label=\"vZome design URL\"\n          type=\"url\"\n          fullWidth\n        />\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={handleCancel} color=\"secondary\">\n          Cancel\n        </Button>\n        <Button onClick={handleOpen} color=\"primary\">\n          Open\n        </Button>\n      </DialogActions>\n    </Dialog>\n  )\n} \n\n\n","\nconst PROGRESS_STARTED = 'PROGRESS_STARTED'\nconst PROGRESS_STOPPED = 'PROGRESS_STOPPED'\n\nexport const startProgress = ( message ) =>\n{\n  return { type: PROGRESS_STARTED, payload: message }\n}\n\nexport const stopProgress = () =>\n{\n  return { type: PROGRESS_STOPPED }\n}\n\nconst initialState = {\n  message: \"\",\n  showing: false\n}\n\nexport const reducer = ( state = initialState, action ) => {\n  switch (action.type) {\n\n    case PROGRESS_STARTED:\n      return {\n        showing: true,\n        message: action.payload\n      }\n  \n    case PROGRESS_STOPPED:\n      return {\n        showing: false,\n        message: \"\"\n      }\n  \n    default:\n      return state\n  }\n}\n","import { startProgress, stopProgress } from './progress'\nimport { showAlert } from './alerts'\n\nexport const fileSelected = selected => ( dispatch, getState ) =>\n{\n  console.log( selected )\n\n  dispatch( startProgress( \"Reading file content...\" ) )\n  \n  const reader = new FileReader();\n  reader.onload = () =>\n  {\n    getState().java.parser( selected.name, reader.result, dispatch, getState )\n  }\n  reader.onerror = () =>\n  {\n    dispatch( stopProgress() )\n    dispatch( showAlert( `Unable to read file: ${selected.name}` ) )\n  }\n  reader.readAsText( selected )\n}\n\nexport const fetchModel = ( path ) => ( dispatch, getState ) =>\n{\n  dispatch( startProgress( \"Fetching model content...\" ) )\n  fetch( path )\n    .then( response =>\n    {\n      if ( !response.ok ) {\n        throw new Error( 'Network response was not ok' );\n      }\n      return response.text()\n    })\n    .then( (text) => {\n      const name = path.split( '\\\\' ).pop().split( '/' ).pop()\n      getState().java.parser( name, text, dispatch, getState )\n    })\n    .catch( error =>\n    {\n      console.error( 'There has been a problem with your fetch operation:', error );\n      dispatch( stopProgress() )\n      dispatch( showAlert( `Unable to load URL: ${path}` ) )\n    });\n}\n\n// from https://www.bitdegree.org/learn/javascript-download\nexport const download = ( filename, bytes ) =>\n{\n  const blob = new Blob([bytes.subarray(1)]);\n  const element = document.createElement( 'a' )\n  const blobURI = URL.createObjectURL( blob )\n  element.setAttribute( 'href', blobURI )\n  element.setAttribute( 'download', filename )\n\n  element.style.display = 'none'\n  document.body.appendChild( element )\n\n  element.click()\n\n  document.body.removeChild( element )\n}\n\n","\nimport React, { useRef } from 'react'\nimport IconButton from '@material-ui/core/IconButton'\nimport Tooltip from '@material-ui/core/Tooltip'\nimport FolderOpenRoundedIcon from '@material-ui/icons/FolderOpenRounded'\nimport Menu from '@material-ui/core/Menu'\nimport MenuItem from '@material-ui/core/MenuItem'\nimport Divider from '@material-ui/core/Divider';\nimport { connect } from 'react-redux'\n\nimport UrlDialog from './webloader'\nimport { fetchModel, fileSelected } from '../bundles/files'\n\nconst models = [\n  {\n    key: \"vZomeLogo\",\n    label: \"vZome Logo\",\n    description: \"The vZome logo, one tetrahedral cell of the 4D 600-cell (cell-first projection)\"\n  },\n  {\n    key: \"affineDodec\",\n    label: \"Stretched Dodecahedron\",\n    description: \"A regular dodecahedron stretched by a linear transformation\"\n  },\n  {\n    key: \"120-cell\",\n    label: \"Hyper-dodecahedron\",\n    description: \"The 4D analogue of a dodecahedron, with 120 dodecahedral cells\"\n  },\n  {\n    key: \"bluePlaneArches1\",\n    label: \"Arched Rhombic Triacontahedron\",\n    description: \"A sculpture built using just the blue planes\"\n  },\n  {\n    key: \"C240\",\n    label: \"C-240 Buckyball\",\n    description: \"C-240 Buckyball\"\n  },\n  {\n    key: \"orangePurpleChiral\",\n    label: \"Orange and Purple Tangle\",\n    description: \"A design by Brian Hall\"\n  },\n]\n\nconst DesignsMenu = ( { openDesign, openFile } ) =>\n{\n  const [anchorEl, setAnchorEl] = React.useState(null)\n  const [showDialog, setShowDialog] = React.useState(false)\n  const ref = useRef()\n  const chooseFile = () => {\n    setAnchorEl(null)\n    ref.current.click()\n  }\n\n  const handleClickOpen = (event) => {\n    setAnchorEl( event.currentTarget )\n  }\n\n  const handleSelectModel = model => {\n    setAnchorEl(null)\n    openDesign( `/app/models/${model}.vZome` )\n  }\n\n  const handleClose = () => {\n    setAnchorEl(null)\n  }\n\n  const handleShowUrlDialog = () => {\n    setAnchorEl(null)\n    setShowDialog(true)\n  }\n\n  return (\n    <>\n      <Tooltip title=\"Open a design\" aria-label=\"open\">\n        <IconButton color=\"inherit\" aria-label=\"open\" onClick={handleClickOpen}>\n          <FolderOpenRoundedIcon fontSize=\"large\"/>\n        </IconButton>\n      </Tooltip>\n      <Menu\n        anchorEl={anchorEl}\n        keepMounted\n        open={Boolean(anchorEl)}\n        onClose={handleClose}\n      >\n        <MenuItem onClick={chooseFile}>Local vZome file\n          <input className=\"FileInput\" type=\"file\" ref={ref}\n            onChange={ (e) => {\n                const selected = e.target.files && e.target.files[0]\n                if ( selected )\n                  openFile( selected )\n              } }\n            accept=\".vZome\" /> \n        </MenuItem>\n        <MenuItem onClick={handleShowUrlDialog}>Remote vZome URL</MenuItem>\n        <Divider />\n        { models.map( (model) => (\n          <MenuItem key={model.key} onClick={()=>handleSelectModel(model.key)}>{model.label}</MenuItem>\n        ) ) }\n      </Menu>\n      <UrlDialog show={showDialog} setShow={setShowDialog} openDesign={openDesign} />\n    </>\n  )\n}\n\nconst select = (state) => ({\n  // TODO make a real selector!\n  enabled: ! state.workingPlane,\n})\n\nconst boundEventActions = {\n  openDesign : fetchModel,\n  openFile : fileSelected,\n}\n\nexport default connect( select, boundEventActions )( DesignsMenu )\n","\nimport React from 'react'\nimport SvgIcon from '@material-ui/core/SvgIcon'\n\n\nexport default function VZomeLogo() {\n  return (\n    <SvgIcon fontSize=\"large\"\n        stroke='black' strokeLinejoin='round' strokeWidth='0.5' \n        viewBox='55 40 340.0 340.0' >\n      {/* <rect fill='#bbdaed' x='1' y='1' width='437.0' height='397.0'/> */}\n      <path fill='#3e3e3e' d='M 269.02 277.8 L 272.46 283.83 L 287.98 296.29 L 286.3 291.64  z'/>\n      <path fill='#e7e7e1' d='M 278.1 234.58 L 267.43 243.11 L 275.89 238.56 L 287.57 229.43  z'/>\n      <path fill='#ffffff' d='M 337.14 259.25 L 331.34 244.39 L 328.71 237.77 L 334.6 252.83  z'/>\n      <path fill='#7c7c7f' d='M 312.8 292.04 L 323.06 288.12 L 301.1 296.41  z'/>\n      <path fill='#c7c7c3' d='M 299.53 226.34 L 287.57 229.43 L 301.91 228.56 L 312.64 225.73  z'/>\n      <path fill='#ffffff' d='M 337.14 259.25 L 334.6 252.83 L 330.46 274.92 L 333.45 279.09  z'/>\n      <path fill='#231b33' d='M 247.91 235.51 L 267.43 243.11 L 275.89 238.56 L 256.03 230.78  z'/>\n      <path fill='#fbfbf5' d='M 275.89 238.56 L 267.43 243.11 L 263.23 262.81 L 271.67 258.63  z'/>\n      <path fill='#333333' d='M 301.1 296.41 L 299.6 291.72 L 286.3 291.64 L 287.98 296.29  z'/>\n      <path fill='#ac85fa' d='M 258.98 217.29 L 275.89 238.56 L 287.57 229.43  z'/>\n      <path fill='#b8b8b4' d='M 269.02 277.8 L 278.45 273.52 L 271.67 258.63 L 263.23 262.81  z'/>\n      <path fill='#ffffff' d='M 301.91 228.56 L 318.16 240.84 L 328.71 237.77 L 312.64 225.73  z'/>\n      <path fill='#828280' d='M 269.02 277.8 L 286.3 291.64 L 278.45 273.52  z'/>\n      <path fill='#d8d8dd' d='M 319.88 284.05 L 323.06 288.12 L 333.45 279.09 L 330.46 274.92  z'/>\n      <path fill='#ffffff' d='M 301.91 228.56 L 287.57 229.43 L 275.89 238.56 L 290.21 237.76  z'/>\n      <path fill='#78787a' d='M 319.88 284.05 L 299.6 291.72 L 301.1 296.41 L 323.06 288.12  z'/>\n      <path fill='#f9f9fe' d='M 318.16 240.84 L 323.09 256.52 L 334.6 252.83 L 328.71 237.77  z'/>\n      <path fill='#f3f3f9' d='M 330.46 274.92 L 334.6 252.83 L 323.09 256.52  z'/>\n      <path fill='#302546' d='M 146.76 150.32 L 140.67 156.75 L 247.91 235.51 L 256.03 230.78  z'/>\n      <path fill='#ffffff' d='M 275.89 238.56 L 271.67 258.63 L 285.64 260.03 L 290.21 237.76  z'/>\n      <path fill='#858583' d='M 286.3 291.64 L 299.6 291.72 L 292.53 275.07 L 278.45 273.52  z'/>\n      <path fill='#fffffd' d='M 301.91 228.56 L 290.21 237.76 L 308.08 251.46 L 318.16 240.84  z'/>\n      <path fill='#d1d1d5' d='M 319.88 284.05 L 330.46 274.92 L 323.09 256.52 L 313.02 267.28  z'/>\n      <path fill='#af87ff' d='M 146.76 150.32 L 256.03 230.78 L 275.89 238.56 L 258.98 217.29 L 150.34 136.97 L 129.32 128.43  z'/>\n      <path fill='#eeeee9' d='M 278.45 273.52 L 292.53 275.07 L 285.64 260.03 L 271.67 258.63  z'/>\n      <path fill='#ffffff' d='M 308.08 251.46 L 290.21 237.76 L 285.64 260.03  z'/>\n      <path fill='#838383' d='M 319.88 284.05 L 313.02 267.28 L 292.53 275.07 L 299.6 291.72  z'/>\n      <path fill='#ffffff' d='M 318.16 240.84 L 308.08 251.46 L 313.02 267.28 L 323.09 256.52  z'/>\n      <path fill='#434344' d='M 110.72 143.96 L 94.46 145.51 L 83.09 147.02 L 97.95 145.6  z'/>\n      <path fill='#efefea' d='M 313.02 267.28 L 308.08 251.46 L 285.64 260.03 L 292.53 275.07  z'/>\n      <path fill='#231b33' d='M 146.76 150.32 L 116.8 136.54 L 110.72 143.96 L 140.67 156.75  z'/>\n      <path fill='#b0b0b4' d='M 123.58 135.31 L 129.32 128.43 L 116.8 136.54 L 110.72 143.96  z'/>\n      <path fill='#637000' d='M 252.8 271.39 L 266.84 272.95 L 285.64 260.03 L 271.67 258.63  z'/>\n      <path fill='#67002d' d='M 309.25 236.52 L 308.08 251.46 L 318.16 240.84  z'/>\n      <path fill='#3e001a' d='M 309.25 236.52 L 292.66 223.95 L 290.21 237.76 L 308.08 251.46  z'/>\n      <path fill='#3e3e3e' d='M 62.41 127.1 L 68.96 135.53 L 83.09 147.02 L 78.11 139.83  z'/>\n      <path fill='#ffffff' d='M 134.72 108.98 L 128.86 93.68 L 123.15 84.58 L 129.09 100.1  z'/>\n      <path fill='#7c7c7f' d='M 110.72 143.96 L 116.8 136.54 L 94.46 145.51  z'/>\n      <path fill='#63002b' d='M 309.25 236.52 L 318.16 240.84 L 319.12 227.83  z'/>\n      <path fill='#647100' d='M 273.8 288.3 L 292.53 275.07 L 285.64 260.03 L 266.84 272.95  z'/>\n      <path fill='#af87ff' d='M 146.76 150.32 L 129.32 128.43 L 116.8 136.54  z'/>\n      <path fill='#ffffff' d='M 134.72 108.98 L 129.09 100.1 L 123.02 121.74 L 129.32 128.43  z'/>\n      <path fill='#fbfbf5' d='M 67.08 84.51 L 62.52 92.36 L 56.57 111.66 L 61.04 104.16  z'/>\n      <path fill='#333333' d='M 94.46 145.51 L 89.61 138.22 L 78.11 139.83 L 83.09 147.02  z'/>\n      <path fill='#b8b8b4' d='M 62.41 127.1 L 67.47 119.18 L 61.04 104.16 L 56.57 111.66  z'/>\n      <path fill='#ffffff' d='M 93.53 73.69 L 108.32 84.9 L 123.15 84.58 L 108.48 73.58  z'/>\n      <path fill='#828280' d='M 62.41 127.1 L 78.11 139.83 L 67.47 119.18  z'/>\n      <path fill='#d8d8dd' d='M 110.24 129.91 L 116.8 136.54 L 129.32 128.43 L 123.02 121.74  z'/>\n      <path fill='#ffffff' d='M 93.53 73.69 L 80.55 76.02 L 67.08 84.51 L 80.02 82.25  z'/>\n      <path fill='#78787a' d='M 110.24 129.91 L 89.61 138.22 L 94.46 145.51 L 116.8 136.54  z'/>\n      <path fill='#f9f9fe' d='M 108.32 84.9 L 112.87 100.77 L 129.09 100.1 L 123.15 84.58  z'/>\n      <path fill='#f3f3f9' d='M 123.02 121.74 L 129.09 100.1 L 112.87 100.77  z'/>\n      <path fill='#750032' d='M 121.5 156.95 L 116.8 136.54 L 110.24 129.91  z'/>\n      <path fill='#ffffff' d='M 67.08 84.51 L 61.04 104.16 L 73.43 104.05 L 80.02 82.25  z'/>\n      <path fill='#858583' d='M 78.11 139.83 L 89.61 138.22 L 79.96 119.22 L 67.47 119.18  z'/>\n      <path fill='#fffffd' d='M 93.53 73.69 L 80.02 82.25 L 96.25 94.76 L 108.32 84.9  z'/>\n      <path fill='#d1d1d5' d='M 110.24 129.91 L 123.02 121.74 L 112.87 100.77 L 100.8 110.78  z'/>\n      <path fill='#750032' d='M 116.44 150.41 L 121.5 156.95 L 110.24 129.91  z'/>\n      <path fill='#eeeee9' d='M 67.47 119.18 L 79.96 119.22 L 73.43 104.05 L 61.04 104.16  z'/>\n      <path fill='#332200' d='M 132.25 105.95 L 123.02 121.74 L 145.32 116.11  z'/>\n      <path fill='#ffffff' d='M 96.25 94.76 L 80.02 82.25 L 73.43 104.05  z'/>\n      <path fill='#750032' d='M 116.44 150.41 L 110.24 129.91 L 89.61 138.22 L 95.59 158.76  z'/>\n      <path fill='#7d5300' d='M 132.25 105.95 L 112.87 100.77 L 123.02 121.74  z'/>\n      <path fill='#838383' d='M 110.24 129.91 L 100.8 110.78 L 79.96 119.22 L 89.61 138.22  z'/>\n      <path fill='#ffffff' d='M 108.32 84.9 L 96.25 94.76 L 100.8 110.78 L 112.87 100.77  z'/>\n      <path fill='#f0a000' d='M 132.25 105.95 L 143.38 94.58 L 112.87 100.77  z'/>\n      <path fill='#efefea' d='M 100.8 110.78 L 96.25 94.76 L 73.43 104.05 L 79.96 119.22  z'/>\n      <path fill='#586300' d='M 207.26 302.74 L 266.84 272.95 L 252.8 271.39 L 192.8 300.75  z'/>\n      <path fill='#647100' d='M 273.8 288.3 L 266.84 272.95 L 207.26 302.74 L 214.56 319.34  z'/>\n      <path fill='#750032' d='M 149.11 268.55 L 154.05 273.81 L 121.5 156.95 L 116.44 150.41  z'/>\n      <path fill='#41001b' d='M 309.25 236.52 L 324.33 145 L 305.62 131.97 L 292.66 223.95  z'/>\n      <path fill='#63002b' d='M 309.25 236.52 L 319.12 227.83 L 335.25 135.97 L 324.33 145  z'/>\n      <path fill='#750032' d='M 149.11 268.55 L 116.44 150.41 L 95.59 158.76 L 126.62 277.24  z'/>\n      <path fill='#302000' d='M 274.29 103.43 L 262.24 92 L 132.25 105.95 L 145.32 116.11  z'/>\n      <path fill='#f0a000' d='M 132.25 105.95 L 262.24 92 L 272.39 79.71 L 143.38 94.58  z'/>\n      <path fill='#637000' d='M 207.26 302.74 L 192.8 300.75 L 170.56 315.58 L 185.06 317.77  z'/>\n      <path fill='#647100' d='M 214.56 319.34 L 207.26 302.74 L 185.06 317.77 L 192.43 334.75  z'/>\n      <path fill='#750032' d='M 149.11 268.55 L 161.16 297.3 L 154.05 273.81  z'/>\n      <path fill='#740032' d='M 149.11 268.55 L 156.99 291.93 L 161.16 297.3  z'/>\n      <path fill='#750032' d='M 149.11 268.55 L 126.62 277.24 L 131.93 301.55 L 156.99 291.93  z'/>\n      <path fill='#63002b' d='M 324.33 145 L 335.25 135.97 L 325.57 127.82  z'/>\n      <path fill='#370017' d='M 324.33 145 L 325.57 127.82 L 306.43 114.69 L 305.62 131.97  z'/>\n      <path fill='#e7e7e1' d='M 131.93 301.55 L 117.86 312.32 L 124.41 308.54 L 139.43 297.14  z'/>\n      <path fill='#5e0029' d='M 335.25 135.97 L 339.08 117.79 L 325.57 127.82  z'/>\n      <path fill='#ffffff' d='M 200.56 331.58 L 193.79 313.85 L 188.34 307.13 L 195.22 325.15  z'/>\n      <path fill='#9271da' d='M 209.63 282.91 L 188.34 307.13 L 193.79 313.85  z'/>\n      <path fill='#f0a000' d='M 272.39 79.71 L 262.24 92 L 291.75 73.03  z'/>\n      <path fill='#513600' d='M 274.29 103.43 L 300.77 96.96 L 286.37 97.65  z'/>\n      <path fill='#c7c7c3' d='M 156.99 291.93 L 139.43 297.14 L 154.97 296.82 L 170.81 292.03  z'/>\n      <path fill='#2b1d00' d='M 274.29 103.43 L 286.37 97.65 L 262.24 92  z'/>\n      <path fill='#ffffff' d='M 200.56 331.58 L 195.22 325.15 L 188.9 352.23 L 194.96 355.84  z'/>\n      <path fill='#a781ee' d='M 170.81 292.03 L 188.34 307.13 L 199.43 286.03 L 181.6 271.03  z'/>\n      <path fill='#fbfbf5' d='M 124.41 308.54 L 117.86 312.32 L 111.54 336.38 L 117.99 333.14  z'/>\n      <path fill='#333333' d='M 155.44 377.01 L 150.98 372.88 L 137 371.75 L 141.65 375.86  z'/>\n      <path fill='#f0a000' d='M 286.37 97.65 L 291.75 73.03 L 262.24 92  z'/>\n      <path fill='#b8b8b4' d='M 118.29 354.29 L 125.58 351.19 L 117.99 333.14 L 111.54 336.38  z'/>\n      <path fill='#ffffff' d='M 154.97 296.82 L 172.69 312.3 L 188.34 307.13 L 170.81 292.03  z'/>\n      <path fill='#828280' d='M 118.29 354.29 L 137 371.75 L 125.58 351.19  z'/>\n      <path fill='#d8d8dd' d='M 174.86 363.91 L 181.23 367.34 L 194.96 355.84 L 188.9 352.23  z'/>\n      <path fill='#ffffff' d='M 154.97 296.82 L 139.43 297.14 L 124.41 308.54 L 139.89 308.33  z'/>\n      <path fill='#78787a' d='M 174.86 363.91 L 150.98 372.88 L 155.44 377.01 L 181.23 367.34  z'/>\n      <path fill='#f9f9fe' d='M 172.69 312.3 L 178.13 331.29 L 195.22 325.15 L 188.34 307.13  z'/>\n      <path fill='#f3f3f9' d='M 188.9 352.23 L 195.22 325.15 L 178.13 331.29  z'/>\n      <path fill='#9472dd' d='M 209.63 282.91 L 300.46 152.09 L 312.84 129.12 L 291.4 153.34 L 199.43 286.03 L 188.34 307.13  z'/>\n      <path fill='#af87ff' d='M 181.6 271.03 L 199.43 286.03 L 291.4 153.34 L 272.15 139.57  z'/>\n      <path fill='#ffffff' d='M 124.41 308.54 L 117.99 333.14 L 132.91 335.69 L 139.89 308.33  z'/>\n      <path fill='#858583' d='M 137 371.75 L 150.98 372.88 L 140.64 353.96 L 125.58 351.19  z'/>\n      <path fill='#fffffd' d='M 154.97 296.82 L 139.89 308.33 L 159.36 325.64 L 172.69 312.3  z'/>\n      <path fill='#434344' d='M 343.16 125.69 L 329.41 127.09 L 312.84 129.12 L 325.57 127.82  z'/>\n      <path fill='#686867' d='M 286.37 97.65 L 293.44 115.7 L 289.55 105.32 L 282.36 86.97  z'/>\n      <path fill='#d1d1d5' d='M 174.86 363.91 L 188.9 352.23 L 178.13 331.29 L 164.8 344.83  z'/>\n      <path fill='#eeeee9' d='M 125.58 351.19 L 140.64 353.96 L 132.91 335.69 L 117.99 333.14  z'/>\n      <path fill='#ffffff' d='M 159.36 325.64 L 139.89 308.33 L 132.91 335.69  z'/>\n      <path fill='#838383' d='M 174.86 363.91 L 164.8 344.83 L 140.64 353.96 L 150.98 372.88  z'/>\n      <path fill='#ffffff' d='M 172.69 312.3 L 159.36 325.64 L 164.8 344.83 L 178.13 331.29  z'/>\n      <path fill='#3e3e3e' d='M 289.55 105.32 L 293.44 115.7 L 312.84 129.12 L 311.23 120.22  z'/>\n      <path fill='#efefea' d='M 164.8 344.83 L 159.36 325.64 L 132.91 335.69 L 140.64 353.96  z'/>\n      <path fill='#aa83f3' d='M 272.15 139.57 L 291.4 153.34 L 311.23 120.22 L 289.55 105.32  z'/>\n      <path fill='#7c7c7f' d='M 343.16 125.69 L 356.69 116.35 L 329.41 127.09  z'/>\n      <path fill='#9573de' d='M 291.4 153.34 L 312.84 129.12 L 311.23 120.22  z'/>\n      <path fill='#ffffff' d='M 373.43 83.98 L 370.91 72.96 L 366.15 98.51 L 369.2 106.91  z'/>\n      <path fill='#fbfbf5' d='M 298.36 54.21 L 287.38 64.26 L 282.36 86.97 L 293.33 77.39  z'/>\n      <path fill='#333333' d='M 329.41 127.09 L 328.09 118.03 L 311.23 120.22 L 312.84 129.12  z'/>\n      <path fill='#b8b8b4' d='M 289.55 105.32 L 301.83 95.26 L 293.33 77.39 L 282.36 86.97  z'/>\n      <path fill='#ffffff' d='M 330.7 41.19 L 351.25 54.2 L 363.58 54.5 L 343.33 41.77  z'/>\n      <path fill='#828280' d='M 289.55 105.32 L 311.23 120.22 L 301.83 95.26  z'/>\n      <path fill='#d8d8dd' d='M 353.37 108.05 L 356.69 116.35 L 369.2 106.91 L 366.15 98.51  z'/>\n      <path fill='#ffffff' d='M 330.7 41.19 L 312.64 44.32 L 298.36 54.21 L 316.4 51.17  z'/>\n      <path fill='#78787a' d='M 353.37 108.05 L 328.09 118.03 L 329.41 127.09 L 356.69 116.35  z'/>\n      <path fill='#f9f9fe' d='M 351.25 54.2 L 357.49 73.1 L 370.91 72.96 L 363.58 54.5  z'/>\n      <path fill='#f3f3f9' d='M 366.15 98.51 L 370.91 72.96 L 357.49 73.1  z'/>\n      <path fill='#ffffff' d='M 298.36 54.21 L 293.33 77.39 L 310.98 76.93 L 316.4 51.17  z'/>\n      <path fill='#858583' d='M 311.23 120.22 L 328.09 118.03 L 319.66 95.01 L 301.83 95.26  z'/>\n      <path fill='#fffffd' d='M 330.7 41.19 L 316.4 51.17 L 339 65.73 L 351.25 54.2  z'/>\n      <path fill='#d1d1d5' d='M 353.37 108.05 L 366.15 98.51 L 357.49 73.1 L 345.25 84.84  z'/>\n      <path fill='#eeeee9' d='M 301.83 95.26 L 319.66 95.01 L 310.98 76.93 L 293.33 77.39  z'/>\n      <path fill='#ffffff' d='M 339 65.73 L 316.4 51.17 L 310.98 76.93  z'/>\n      <path fill='#838383' d='M 353.37 108.05 L 345.25 84.84 L 319.66 95.01 L 328.09 118.03  z'/>\n      <path fill='#ffffff' d='M 351.25 54.2 L 339 65.73 L 345.25 84.84 L 357.49 73.1  z'/>\n      <path fill='#efefea' d='M 345.25 84.84 L 339 65.73 L 310.98 76.93 L 319.66 95.01  z'/>\n    </SvgIcon>\n  )\n}\n","import React from 'react'\nimport { makeStyles } from '@material-ui/core/styles'\nimport AppBar from '@material-ui/core/AppBar'\nimport Toolbar from '@material-ui/core/Toolbar'\nimport Typography from '@material-ui/core/Typography'\nimport Box from '@material-ui/core/Box'\n\nimport AboutButton from './about'\nimport OpenButton from './designs'\nimport VZomeLogo from './logo'\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    flexGrow: 1,\n  },\n  title: {\n    marginLeft: theme.spacing(2),\n    flexGrow: 1,\n  },\n  open: {\n    marginRight: theme.spacing(5),\n  },\n}))\n\nexport default function VZomeAppBar() {\n  const classes = useStyles()\n\n  return (\n    <div className={classes.root}>\n      <AppBar position=\"static\">\n        <Toolbar>\n          {/* <IconButton edge=\"start\" className={classes.menuButton} aria-label=\"logo\"> */}\n            <VZomeLogo/>\n          {/* </IconButton> */}\n\n          <Typography variant=\"h5\" className={classes.title}>\n            vZome <Box component=\"span\" fontStyle=\"oblique\">Online</Box>\n          </Typography>\n          <OpenButton className={classes.open}/>\n          <AboutButton/>\n        </Toolbar>\n      </AppBar>\n    </div>\n  )\n}\n","import React from 'react'\n\n// import Fab from '@material-ui/core/Fab'\n// import UndoRoundedIcon from '@material-ui/icons/UndoRounded'\n// import RedoRoundedIcon from '@material-ui/icons/RedoRounded'\n\nimport './App.css'\n\nimport ModelCanvas from './components/modelcanvas-three.js'\nimport ErrorAlert from './components/alert.js'\nimport Spinner from './components/spinner.js'\nimport VZomeAppBar from './components/appbar.js'\n// import Exporter from './components/exporter.js'\n// import EditMenu from './components/editmenu.js'\n\nfunction App() {\n  return (\n    <>\n      <VZomeAppBar/>\n      <ModelCanvas/>\n      <ErrorAlert/> \n      {/* <Fab color=\"primary\" aria-label=\"undo\">\n        <UndoRoundedIcon />\n      </Fab>\n      <Fab color=\"primary\" aria-label=\"redo\">\n        <RedoRoundedIcon />\n      </Fab> */}\n\n      {/* <Exporter/> */}\n      {/* <EditMenu/> */}\n      <Spinner/>\n      {/* <div>Export icon made from <a href=\"http://www.onlinewebfonts.com/icon\">Icon Fonts</a> is licensed by CC BY 3.0</div> */}\n    </>\n  );\n}\n\nexport default App;\n","\nimport { createStore, applyMiddleware, combineReducers } from 'redux'\n\nimport * as alerts from './alerts'\nimport * as cheerpj from './cheerpj'\nimport * as camera from './camera'\nimport * as lighting from './lighting'\nimport * as progress from './progress'\nimport * as jsweet from './jsweet'\nimport * as commands from '../commands'\nimport * as workingPlane from './planes'\nimport * as models from './models'\nimport * as fields from '../fields'\nimport * as shapers from './shapers'\n\nconst requiredBundles = { lighting, fields }\n\nlet bundles\nconst urlParams = new URLSearchParams( window.location.search );\nconst profile = urlParams.get( \"profile\" ) || urlParams.get( \"editMode\" )\nswitch ( profile ) {\n\n  case \"jsweet\":\n    bundles = { ...requiredBundles, java: cheerpj, camera, alerts, progress }\n    break;\n\n  case \"plane\":\n    bundles = { ...requiredBundles, java: jsweet, models, shapers, workingPlane }\n    break;\n\n  default:\n    bundles = { ...requiredBundles, java: jsweet, models, shapers, commands, alerts, progress }\n    break;\n}\n\n\nexport default ( middleware ) =>\n{\n  const names = Object.keys( bundles )\n\n  const reducers = names.reduce( ( obj, key ) => {\n    const reducer = bundles[key].reducer\n    if ( reducer )\n      obj[ key ] = reducer\n    return obj\n  }, {} )\n\n  console.log( `bundle reducers: ${JSON.stringify( Object.keys( reducers ) )}` )\n\n  const rootReducer = combineReducers( reducers )\n  \n  const store = createStore( rootReducer, applyMiddleware( ...middleware ) );\n  \n  // TODO: is there a better pattern than these inits?\n  names.map( key => {\n    const init = bundles[key].init\n    if ( init ) {\n      console.log( `bundle init: ${key}` )\n      init( window, store )\n    }\n    return null\n  } )\n\n  return store\n}","export default {\n  notes: \"This is a vZome Shapes JSON export, with a 'camera' field added manually.\",\n  camera:  {\n    fieldOfView: 0.442,\n    position: { x: -23.6819, y: 12.3843, z: -46.8956 },\n    lookAtPoint: { x: 0, y: -3.4270, z: 5.5450 },\n    upDirection: { x: -0.8263, y: 0.3136, z: 0.4677 },\n    farClipDistance: 119.34,\n    nearClipDistance: 0.1491\n  },\n  shapes : [ {\n    \"id\" : \"73c8f4c7-caea-4017-9de0-8bfc11e8f413\",\n    \"vertices\" : [ {\n      \"x\" : 0.4295635,\n      \"y\" : 0.0,\n      \"z\" : 0.98684436\n    }, {\n      \"x\" : 0.0,\n      \"y\" : 0.4295635,\n      \"z\" : 0.98684436\n    }, {\n      \"x\" : -0.4295635,\n      \"y\" : 0.0,\n      \"z\" : 0.98684436\n    }, {\n      \"x\" : 0.0,\n      \"y\" : -0.4295635,\n      \"z\" : 0.98684436\n    }, {\n      \"x\" : -0.4295635,\n      \"y\" : -0.98684436,\n      \"z\" : 0.0\n    }, {\n      \"x\" : 0.0,\n      \"y\" : -0.98684436,\n      \"z\" : 0.4295635\n    }, {\n      \"x\" : -0.23606798,\n      \"y\" : -0.7082039,\n      \"z\" : 0.7082039\n    }, {\n      \"x\" : -0.7082039,\n      \"y\" : -0.7082039,\n      \"z\" : 0.23606798\n    }, {\n      \"x\" : 0.7082039,\n      \"y\" : -0.7082039,\n      \"z\" : 0.23606798\n    }, {\n      \"x\" : 0.4295635,\n      \"y\" : -0.98684436,\n      \"z\" : 0.0\n    }, {\n      \"x\" : 0.7082039,\n      \"y\" : -0.7082039,\n      \"z\" : -0.23606798\n    }, {\n      \"x\" : 0.98684436,\n      \"y\" : -0.4295635,\n      \"z\" : 0.0\n    }, {\n      \"x\" : -0.23606798,\n      \"y\" : 0.7082039,\n      \"z\" : 0.7082039\n    }, {\n      \"x\" : -0.7082039,\n      \"y\" : 0.23606798,\n      \"z\" : 0.7082039\n    }, {\n      \"x\" : -0.98684436,\n      \"y\" : 0.4295635,\n      \"z\" : 0.0\n    }, {\n      \"x\" : -0.98684436,\n      \"y\" : 0.0,\n      \"z\" : -0.4295635\n    }, {\n      \"x\" : -0.98684436,\n      \"y\" : -0.4295635,\n      \"z\" : 0.0\n    }, {\n      \"x\" : -0.98684436,\n      \"y\" : 0.0,\n      \"z\" : 0.4295635\n    }, {\n      \"x\" : 0.0,\n      \"y\" : -0.4295635,\n      \"z\" : -0.98684436\n    }, {\n      \"x\" : -0.23606798,\n      \"y\" : -0.7082039,\n      \"z\" : -0.7082039\n    }, {\n      \"x\" : -0.7082039,\n      \"y\" : -0.23606798,\n      \"z\" : -0.7082039\n    }, {\n      \"x\" : -0.4295635,\n      \"y\" : 0.0,\n      \"z\" : -0.98684436\n    }, {\n      \"x\" : -0.7082039,\n      \"y\" : -0.7082039,\n      \"z\" : -0.23606798\n    }, {\n      \"x\" : 0.0,\n      \"y\" : -0.98684436,\n      \"z\" : -0.4295635\n    }, {\n      \"x\" : -0.7082039,\n      \"y\" : 0.23606798,\n      \"z\" : -0.7082039\n    }, {\n      \"x\" : -0.7082039,\n      \"y\" : 0.7082039,\n      \"z\" : 0.23606798\n    }, {\n      \"x\" : -0.4295635,\n      \"y\" : 0.98684436,\n      \"z\" : 0.0\n    }, {\n      \"x\" : -0.7082039,\n      \"y\" : 0.7082039,\n      \"z\" : -0.23606798\n    }, {\n      \"x\" : 0.7082039,\n      \"y\" : 0.7082039,\n      \"z\" : 0.23606798\n    }, {\n      \"x\" : 0.23606798,\n      \"y\" : 0.7082039,\n      \"z\" : 0.7082039\n    }, {\n      \"x\" : 0.7082039,\n      \"y\" : 0.23606798,\n      \"z\" : 0.7082039\n    }, {\n      \"x\" : 0.23606798,\n      \"y\" : -0.7082039,\n      \"z\" : -0.7082039\n    }, {\n      \"x\" : 0.7082039,\n      \"y\" : -0.23606798,\n      \"z\" : -0.7082039\n    }, {\n      \"x\" : 0.7082039,\n      \"y\" : 0.7082039,\n      \"z\" : -0.23606798\n    }, {\n      \"x\" : 0.4295635,\n      \"y\" : 0.98684436,\n      \"z\" : 0.0\n    }, {\n      \"x\" : 0.98684436,\n      \"y\" : 0.4295635,\n      \"z\" : 0.0\n    }, {\n      \"x\" : 0.23606798,\n      \"y\" : -0.7082039,\n      \"z\" : 0.7082039\n    }, {\n      \"x\" : 0.7082039,\n      \"y\" : -0.23606798,\n      \"z\" : 0.7082039\n    }, {\n      \"x\" : 0.7082039,\n      \"y\" : 0.23606798,\n      \"z\" : -0.7082039\n    }, {\n      \"x\" : 0.23606798,\n      \"y\" : 0.7082039,\n      \"z\" : -0.7082039\n    }, {\n      \"x\" : -0.7082039,\n      \"y\" : -0.23606798,\n      \"z\" : 0.7082039\n    }, {\n      \"x\" : -0.23606798,\n      \"y\" : 0.7082039,\n      \"z\" : -0.7082039\n    }, {\n      \"x\" : 0.0,\n      \"y\" : 0.98684436,\n      \"z\" : 0.4295635\n    }, {\n      \"x\" : 0.98684436,\n      \"y\" : 0.0,\n      \"z\" : -0.4295635\n    }, {\n      \"x\" : 0.98684436,\n      \"y\" : 0.0,\n      \"z\" : 0.4295635\n    }, {\n      \"x\" : 0.0,\n      \"y\" : 0.4295635,\n      \"z\" : -0.98684436\n    }, {\n      \"x\" : 0.4295635,\n      \"y\" : 0.0,\n      \"z\" : -0.98684436\n    }, {\n      \"x\" : 0.0,\n      \"y\" : 0.98684436,\n      \"z\" : -0.4295635\n    } ],\n    \"faces\" : [ {\n      \"vertices\" : [ 28, 35, 33 ]\n    }, {\n      \"vertices\" : [ 28, 33, 34 ]\n    }, {\n      \"vertices\" : [ 18, 21, 45 ]\n    }, {\n      \"vertices\" : [ 18, 45, 46 ]\n    }, {\n      \"vertices\" : [ 21, 24, 41 ]\n    }, {\n      \"vertices\" : [ 21, 41, 45 ]\n    }, {\n      \"vertices\" : [ 28, 34, 42 ]\n    }, {\n      \"vertices\" : [ 28, 42, 29 ]\n    }, {\n      \"vertices\" : [ 11, 43, 35 ]\n    }, {\n      \"vertices\" : [ 11, 35, 44 ]\n    }, {\n      \"vertices\" : [ 0, 1, 2 ]\n    }, {\n      \"vertices\" : [ 0, 2, 3 ]\n    }, {\n      \"vertices\" : [ 28, 30, 44 ]\n    }, {\n      \"vertices\" : [ 28, 44, 35 ]\n    }, {\n      \"vertices\" : [ 26, 47, 41 ]\n    }, {\n      \"vertices\" : [ 26, 41, 27 ]\n    }, {\n      \"vertices\" : [ 33, 35, 43 ]\n    }, {\n      \"vertices\" : [ 33, 43, 38 ]\n    }, {\n      \"vertices\" : [ 26, 42, 34 ]\n    }, {\n      \"vertices\" : [ 26, 34, 47 ]\n    }, {\n      \"vertices\" : [ 4, 5, 6 ]\n    }, {\n      \"vertices\" : [ 4, 6, 7 ]\n    }, {\n      \"vertices\" : [ 33, 39, 47 ]\n    }, {\n      \"vertices\" : [ 33, 47, 34 ]\n    }, {\n      \"vertices\" : [ 1, 12, 13 ]\n    }, {\n      \"vertices\" : [ 1, 13, 2 ]\n    }, {\n      \"vertices\" : [ 32, 46, 38 ]\n    }, {\n      \"vertices\" : [ 32, 38, 43 ]\n    }, {\n      \"vertices\" : [ 8, 9, 10 ]\n    }, {\n      \"vertices\" : [ 8, 10, 11 ]\n    }, {\n      \"vertices\" : [ 38, 46, 45 ]\n    }, {\n      \"vertices\" : [ 38, 45, 39 ]\n    }, {\n      \"vertices\" : [ 4, 23, 9 ]\n    }, {\n      \"vertices\" : [ 4, 9, 5 ]\n    }, {\n      \"vertices\" : [ 39, 45, 41 ]\n    }, {\n      \"vertices\" : [ 39, 41, 47 ]\n    }, {\n      \"vertices\" : [ 4, 7, 16 ]\n    }, {\n      \"vertices\" : [ 4, 16, 22 ]\n    }, {\n      \"vertices\" : [ 12, 25, 13 ]\n    }, {\n      \"vertices\" : [ 3, 6, 5 ]\n    }, {\n      \"vertices\" : [ 3, 5, 36 ]\n    }, {\n      \"vertices\" : [ 2, 40, 6 ]\n    }, {\n      \"vertices\" : [ 2, 6, 3 ]\n    }, {\n      \"vertices\" : [ 6, 40, 7 ]\n    }, {\n      \"vertices\" : [ 5, 9, 8 ]\n    }, {\n      \"vertices\" : [ 5, 8, 36 ]\n    }, {\n      \"vertices\" : [ 0, 30, 29 ]\n    }, {\n      \"vertices\" : [ 0, 29, 1 ]\n    }, {\n      \"vertices\" : [ 19, 22, 20 ]\n    }, {\n      \"vertices\" : [ 14, 15, 16 ]\n    }, {\n      \"vertices\" : [ 14, 16, 17 ]\n    }, {\n      \"vertices\" : [ 4, 22, 19 ]\n    }, {\n      \"vertices\" : [ 4, 19, 23 ]\n    }, {\n      \"vertices\" : [ 13, 25, 14 ]\n    }, {\n      \"vertices\" : [ 13, 14, 17 ]\n    }, {\n      \"vertices\" : [ 2, 13, 17 ]\n    }, {\n      \"vertices\" : [ 2, 17, 40 ]\n    }, {\n      \"vertices\" : [ 10, 31, 32 ]\n    }, {\n      \"vertices\" : [ 9, 23, 31 ]\n    }, {\n      \"vertices\" : [ 9, 31, 10 ]\n    }, {\n      \"vertices\" : [ 15, 20, 22 ]\n    }, {\n      \"vertices\" : [ 15, 22, 16 ]\n    }, {\n      \"vertices\" : [ 0, 3, 36 ]\n    }, {\n      \"vertices\" : [ 0, 36, 37 ]\n    }, {\n      \"vertices\" : [ 18, 19, 20 ]\n    }, {\n      \"vertices\" : [ 18, 20, 21 ]\n    }, {\n      \"vertices\" : [ 15, 24, 21 ]\n    }, {\n      \"vertices\" : [ 15, 21, 20 ]\n    }, {\n      \"vertices\" : [ 7, 40, 17 ]\n    }, {\n      \"vertices\" : [ 7, 17, 16 ]\n    }, {\n      \"vertices\" : [ 14, 27, 24 ]\n    }, {\n      \"vertices\" : [ 14, 24, 15 ]\n    }, {\n      \"vertices\" : [ 8, 37, 36 ]\n    }, {\n      \"vertices\" : [ 1, 29, 42 ]\n    }, {\n      \"vertices\" : [ 1, 42, 12 ]\n    }, {\n      \"vertices\" : [ 28, 29, 30 ]\n    }, {\n      \"vertices\" : [ 18, 31, 23 ]\n    }, {\n      \"vertices\" : [ 18, 23, 19 ]\n    }, {\n      \"vertices\" : [ 14, 25, 26 ]\n    }, {\n      \"vertices\" : [ 14, 26, 27 ]\n    }, {\n      \"vertices\" : [ 24, 27, 41 ]\n    }, {\n      \"vertices\" : [ 10, 32, 43 ]\n    }, {\n      \"vertices\" : [ 10, 43, 11 ]\n    }, {\n      \"vertices\" : [ 8, 11, 44 ]\n    }, {\n      \"vertices\" : [ 8, 44, 37 ]\n    }, {\n      \"vertices\" : [ 12, 42, 26 ]\n    }, {\n      \"vertices\" : [ 12, 26, 25 ]\n    }, {\n      \"vertices\" : [ 33, 38, 39 ]\n    }, {\n      \"vertices\" : [ 0, 37, 44 ]\n    }, {\n      \"vertices\" : [ 0, 44, 30 ]\n    }, {\n      \"vertices\" : [ 18, 46, 32 ]\n    }, {\n      \"vertices\" : [ 18, 32, 31 ]\n    } ]\n  }, {\n    \"id\" : \"4ea04789-61d1-4894-a953-273276a9edfb\",\n    \"vertices\" : [ {\n      \"x\" : 1.6671842,\n      \"y\" : 4.59017,\n      \"z\" : -2.0967476\n    }, {\n      \"x\" : 1.9098301,\n      \"y\" : 5.145898,\n      \"z\" : -2.381966\n    }, {\n      \"x\" : 2.1884706,\n      \"y\" : 4.8672576,\n      \"z\" : -2.618034\n    }, {\n      \"x\" : 0.28521827,\n      \"y\" : 1.5,\n      \"z\" : -0.71478176\n    }, {\n      \"x\" : 1.9032522,\n      \"y\" : 4.354102,\n      \"z\" : -2.3328156\n    }, {\n      \"x\" : 0.52128625,\n      \"y\" : 1.263932,\n      \"z\" : -0.9508497\n    }, {\n      \"x\" : 2.381966,\n      \"y\" : 5.145898,\n      \"z\" : -1.9098301\n    }, {\n      \"x\" : 0.71478176,\n      \"y\" : 1.5,\n      \"z\" : -0.28521827\n    }, {\n      \"x\" : 0.4295635,\n      \"y\" : 0.98684436,\n      \"z\" : 0.0\n    }, {\n      \"x\" : 0.9508497,\n      \"y\" : 1.263932,\n      \"z\" : -0.52128625\n    }, {\n      \"x\" : 0.0,\n      \"y\" : 0.98684436,\n      \"z\" : -0.4295635\n    }, {\n      \"x\" : 2.618034,\n      \"y\" : 4.8672576,\n      \"z\" : -2.1884706\n    }, {\n      \"x\" : 2.0967476,\n      \"y\" : 4.59017,\n      \"z\" : -1.6671842\n    }, {\n      \"x\" : 2.3328156,\n      \"y\" : 4.354102,\n      \"z\" : -1.9032522\n    }, {\n      \"x\" : 2.618034,\n      \"y\" : 5.854102,\n      \"z\" : -2.618034\n    }, {\n      \"x\" : 0.7082039,\n      \"y\" : 0.7082039,\n      \"z\" : -0.23606798\n    }, {\n      \"x\" : 0.23606798,\n      \"y\" : 0.7082039,\n      \"z\" : -0.7082039\n    } ],\n    \"faces\" : [ {\n      \"vertices\" : [ 8, 15, 9 ]\n    }, {\n      \"vertices\" : [ 0, 1, 2 ]\n    }, {\n      \"vertices\" : [ 11, 12, 13 ]\n    }, {\n      \"vertices\" : [ 0, 2, 4 ]\n    }, {\n      \"vertices\" : [ 7, 9, 13 ]\n    }, {\n      \"vertices\" : [ 7, 13, 12 ]\n    }, {\n      \"vertices\" : [ 0, 4, 5 ]\n    }, {\n      \"vertices\" : [ 0, 5, 3 ]\n    }, {\n      \"vertices\" : [ 5, 9, 15 ]\n    }, {\n      \"vertices\" : [ 5, 15, 16 ]\n    }, {\n      \"vertices\" : [ 3, 5, 10 ]\n    }, {\n      \"vertices\" : [ 0, 12, 6 ]\n    }, {\n      \"vertices\" : [ 0, 6, 1 ]\n    }, {\n      \"vertices\" : [ 0, 3, 7 ]\n    }, {\n      \"vertices\" : [ 0, 7, 12 ]\n    }, {\n      \"vertices\" : [ 7, 8, 9 ]\n    }, {\n      \"vertices\" : [ 3, 10, 8 ]\n    }, {\n      \"vertices\" : [ 3, 8, 7 ]\n    }, {\n      \"vertices\" : [ 6, 12, 11 ]\n    }, {\n      \"vertices\" : [ 2, 11, 13 ]\n    }, {\n      \"vertices\" : [ 2, 13, 4 ]\n    }, {\n      \"vertices\" : [ 4, 13, 9 ]\n    }, {\n      \"vertices\" : [ 4, 9, 5 ]\n    }, {\n      \"vertices\" : [ 5, 16, 10 ]\n    } ]\n  }, {\n    \"id\" : \"f74369fa-af46-49c1-8d46-58f3ea0479cc\",\n    \"vertices\" : [ {\n      \"x\" : 3.0,\n      \"y\" : 3.0,\n      \"z\" : 0.47213596\n    }, {\n      \"x\" : 3.2786405,\n      \"y\" : 2.7213595,\n      \"z\" : 0.7082039\n    }, {\n      \"x\" : 1.5147084,\n      \"y\" : 0.9574275,\n      \"z\" : 0.29179606\n    }, {\n      \"x\" : 1.236068,\n      \"y\" : 1.236068,\n      \"z\" : 0.05572809\n    }, {\n      \"x\" : 1.236068,\n      \"y\" : 1.236068,\n      \"z\" : 0.52786404\n    }, {\n      \"x\" : 0.9574275,\n      \"y\" : 1.5147084,\n      \"z\" : 0.29179606\n    }, {\n      \"x\" : 0.4295635,\n      \"y\" : 0.98684436,\n      \"z\" : 0.0\n    }, {\n      \"x\" : 0.7082039,\n      \"y\" : 0.7082039,\n      \"z\" : 0.23606798\n    }, {\n      \"x\" : 2.7213595,\n      \"y\" : 3.2786405,\n      \"z\" : 0.7082039\n    }, {\n      \"x\" : 3.0,\n      \"y\" : 3.0,\n      \"z\" : 0.9442719\n    }, {\n      \"x\" : 3.527864,\n      \"y\" : 3.527864,\n      \"z\" : 1.236068\n    }, {\n      \"x\" : 3.2492237,\n      \"y\" : 3.8065045,\n      \"z\" : 1.0\n    }, {\n      \"x\" : 4.236068,\n      \"y\" : 4.236068,\n      \"z\" : 1.0\n    }, {\n      \"x\" : 3.527864,\n      \"y\" : 3.527864,\n      \"z\" : 0.76393205\n    }, {\n      \"x\" : 3.8065045,\n      \"y\" : 3.2492237,\n      \"z\" : 1.0\n    }, {\n      \"x\" : 0.7082039,\n      \"y\" : 0.7082039,\n      \"z\" : -0.23606798\n    }, {\n      \"x\" : 0.98684436,\n      \"y\" : 0.4295635,\n      \"z\" : 0.0\n    } ],\n    \"faces\" : [ {\n      \"vertices\" : [ 0, 3, 5 ]\n    }, {\n      \"vertices\" : [ 0, 5, 8 ]\n    }, {\n      \"vertices\" : [ 0, 8, 11 ]\n    }, {\n      \"vertices\" : [ 0, 11, 13 ]\n    }, {\n      \"vertices\" : [ 1, 9, 4 ]\n    }, {\n      \"vertices\" : [ 1, 4, 2 ]\n    }, {\n      \"vertices\" : [ 1, 14, 10 ]\n    }, {\n      \"vertices\" : [ 1, 10, 9 ]\n    }, {\n      \"vertices\" : [ 2, 16, 15 ]\n    }, {\n      \"vertices\" : [ 2, 15, 3 ]\n    }, {\n      \"vertices\" : [ 0, 1, 2 ]\n    }, {\n      \"vertices\" : [ 0, 2, 3 ]\n    }, {\n      \"vertices\" : [ 4, 5, 6 ]\n    }, {\n      \"vertices\" : [ 4, 6, 7 ]\n    }, {\n      \"vertices\" : [ 8, 9, 10 ]\n    }, {\n      \"vertices\" : [ 8, 10, 11 ]\n    }, {\n      \"vertices\" : [ 4, 9, 8 ]\n    }, {\n      \"vertices\" : [ 4, 8, 5 ]\n    }, {\n      \"vertices\" : [ 0, 13, 14 ]\n    }, {\n      \"vertices\" : [ 0, 14, 1 ]\n    }, {\n      \"vertices\" : [ 3, 15, 6 ]\n    }, {\n      \"vertices\" : [ 3, 6, 5 ]\n    }, {\n      \"vertices\" : [ 2, 4, 7 ]\n    }, {\n      \"vertices\" : [ 2, 7, 16 ]\n    } ]\n  }, {\n    \"id\" : \"7f5d4f02-4610-49a1-ba67-a876c7aafc68\",\n    \"vertices\" : [ {\n      \"x\" : 0.3130823,\n      \"y\" : 1.618034,\n      \"z\" : 0.7426458\n    }, {\n      \"x\" : 0.7426458,\n      \"y\" : 1.618034,\n      \"z\" : 0.3130823\n    }, {\n      \"x\" : 1.5967478,\n      \"y\" : 5.236068,\n      \"z\" : 1.1671842\n    }, {\n      \"x\" : 1.1671842,\n      \"y\" : 5.236068,\n      \"z\" : 1.5967478\n    }, {\n      \"x\" : 0.23606798,\n      \"y\" : 0.7082039,\n      \"z\" : 0.7082039\n    }, {\n      \"x\" : 0.7082039,\n      \"y\" : 0.7082039,\n      \"z\" : 0.23606798\n    }, {\n      \"x\" : 0.4295635,\n      \"y\" : 0.98684436,\n      \"z\" : 0.0\n    }, {\n      \"x\" : 0.4508497,\n      \"y\" : 1.618034,\n      \"z\" : 0.021286236\n    }, {\n      \"x\" : 1.3049517,\n      \"y\" : 5.236068,\n      \"z\" : 0.8753882\n    }, {\n      \"x\" : 1.618034,\n      \"y\" : 5.8672576,\n      \"z\" : 1.1884705\n    }, {\n      \"x\" : 0.8753882,\n      \"y\" : 5.236068,\n      \"z\" : 1.3049517\n    }, {\n      \"x\" : 0.90983003,\n      \"y\" : 6.145898,\n      \"z\" : 1.381966\n    }, {\n      \"x\" : 1.381966,\n      \"y\" : 6.145898,\n      \"z\" : 0.90983003\n    }, {\n      \"x\" : 1.618034,\n      \"y\" : 6.854102,\n      \"z\" : 1.618034\n    }, {\n      \"x\" : 1.1884705,\n      \"y\" : 5.8672576,\n      \"z\" : 1.618034\n    }, {\n      \"x\" : 0.0,\n      \"y\" : 0.98684436,\n      \"z\" : 0.4295635\n    }, {\n      \"x\" : 0.021286236,\n      \"y\" : 1.618034,\n      \"z\" : 0.4508497\n    }, {\n      \"x\" : 0.0,\n      \"y\" : 0.0,\n      \"z\" : 0.0\n    } ],\n    \"faces\" : [ {\n      \"vertices\" : [ 1, 6, 7 ]\n    }, {\n      \"vertices\" : [ 1, 7, 8 ]\n    }, {\n      \"vertices\" : [ 1, 8, 9 ]\n    }, {\n      \"vertices\" : [ 1, 9, 2 ]\n    }, {\n      \"vertices\" : [ 0, 15, 4 ]\n    }, {\n      \"vertices\" : [ 10, 14, 11 ]\n    }, {\n      \"vertices\" : [ 0, 1, 2 ]\n    }, {\n      \"vertices\" : [ 0, 2, 3 ]\n    }, {\n      \"vertices\" : [ 8, 10, 11 ]\n    }, {\n      \"vertices\" : [ 8, 11, 12 ]\n    }, {\n      \"vertices\" : [ 7, 16, 10 ]\n    }, {\n      \"vertices\" : [ 7, 10, 8 ]\n    }, {\n      \"vertices\" : [ 0, 4, 5 ]\n    }, {\n      \"vertices\" : [ 0, 5, 1 ]\n    }, {\n      \"vertices\" : [ 0, 3, 14 ]\n    }, {\n      \"vertices\" : [ 0, 14, 10 ]\n    }, {\n      \"vertices\" : [ 0, 10, 16 ]\n    }, {\n      \"vertices\" : [ 0, 16, 15 ]\n    }, {\n      \"vertices\" : [ 2, 9, 14 ]\n    }, {\n      \"vertices\" : [ 2, 14, 3 ]\n    }, {\n      \"vertices\" : [ 6, 15, 16 ]\n    }, {\n      \"vertices\" : [ 6, 16, 7 ]\n    }, {\n      \"vertices\" : [ 1, 5, 6 ]\n    }, {\n      \"vertices\" : [ 8, 12, 9 ]\n    } ]\n  }, {\n    \"id\" : \"d9450062-9d65-4095-8f24-56c41751ac36\",\n    \"vertices\" : [ {\n      \"x\" : 1.1688592,\n      \"y\" : 0.69672334,\n      \"z\" : 0.9327913\n    }, {\n      \"x\" : 0.7082039,\n      \"y\" : 0.23606798,\n      \"z\" : 0.7082039\n    }, {\n      \"x\" : 0.7082039,\n      \"y\" : 0.7082039,\n      \"z\" : 0.23606798\n    }, {\n      \"x\" : 4.236068,\n      \"y\" : 4.236068,\n      \"z\" : 4.236068\n    }, {\n      \"x\" : 3.3032768,\n      \"y\" : 3.5393445,\n      \"z\" : 3.0672088\n    }, {\n      \"x\" : 4.0,\n      \"y\" : 3.527864,\n      \"z\" : 3.527864\n    }, {\n      \"x\" : 3.5393445,\n      \"y\" : 3.0672088,\n      \"z\" : 3.3032768\n    }, {\n      \"x\" : 3.527864,\n      \"y\" : 4.0,\n      \"z\" : 3.527864\n    }, {\n      \"x\" : 0.69672334,\n      \"y\" : 0.9327913,\n      \"z\" : 1.1688592\n    }, {\n      \"x\" : 3.0672088,\n      \"y\" : 3.3032768,\n      \"z\" : 3.5393445\n    }, {\n      \"x\" : 3.527864,\n      \"y\" : 3.527864,\n      \"z\" : 4.0\n    }, {\n      \"x\" : 0.9327913,\n      \"y\" : 1.1688592,\n      \"z\" : 0.69672334\n    }, {\n      \"x\" : 0.23606798,\n      \"y\" : 0.7082039,\n      \"z\" : 0.7082039\n    } ],\n    \"faces\" : [ {\n      \"vertices\" : [ 4, 11, 8 ]\n    }, {\n      \"vertices\" : [ 4, 8, 9 ]\n    }, {\n      \"vertices\" : [ 0, 1, 2 ]\n    }, {\n      \"vertices\" : [ 0, 8, 1 ]\n    }, {\n      \"vertices\" : [ 0, 2, 11 ]\n    }, {\n      \"vertices\" : [ 4, 5, 6 ]\n    }, {\n      \"vertices\" : [ 4, 7, 5 ]\n    }, {\n      \"vertices\" : [ 4, 9, 7 ]\n    }, {\n      \"vertices\" : [ 5, 10, 6 ]\n    }, {\n      \"vertices\" : [ 0, 11, 4 ]\n    }, {\n      \"vertices\" : [ 0, 4, 6 ]\n    }, {\n      \"vertices\" : [ 1, 8, 12 ]\n    }, {\n      \"vertices\" : [ 0, 6, 9 ]\n    }, {\n      \"vertices\" : [ 0, 9, 8 ]\n    }, {\n      \"vertices\" : [ 2, 12, 11 ]\n    }, {\n      \"vertices\" : [ 6, 10, 9 ]\n    }, {\n      \"vertices\" : [ 7, 9, 10 ]\n    }, {\n      \"vertices\" : [ 8, 11, 12 ]\n    } ]\n  } ],\n  instances : [ {\n    \"shape\" : \"73c8f4c7-caea-4017-9de0-8bfc11e8f413\",\n    \"color\" : \"#FFFFFF\",\n    \"position\" : {\n      \"x\" : 1.618034,\n      \"y\" : -6.854102,\n      \"z\" : 6.854102\n    }\n  }, {\n    \"shape\" : \"4ea04789-61d1-4894-a953-273276a9edfb\",\n    \"color\" : \"#750032\",\n    \"position\" : {\n      \"x\" : 0.0,\n      \"y\" : 0.0,\n      \"z\" : 8.472136\n    },\n    \"rotation\" : {\n      \"x\" : -0.70710677,\n      \"y\" : 0.0,\n      \"z\" : 0.0,\n      \"w\" : 0.70710677\n    }\n  }, {\n    \"shape\" : \"f74369fa-af46-49c1-8d46-58f3ea0479cc\",\n    \"color\" : \"#647100\",\n    \"position\" : {\n      \"x\" : 2.618034,\n      \"y\" : -2.618034,\n      \"z\" : 2.618034\n    },\n    \"rotation\" : {\n      \"x\" : 0.5,\n      \"y\" : -0.5,\n      \"z\" : -0.5,\n      \"w\" : 0.5\n    }\n  }, {\n    \"shape\" : \"73c8f4c7-caea-4017-9de0-8bfc11e8f413\",\n    \"color\" : \"#FFFFFF\",\n    \"position\" : {\n      \"x\" : -4.236068,\n      \"y\" : -4.236068,\n      \"z\" : 4.236068\n    }\n  }, {\n    \"shape\" : \"7f5d4f02-4610-49a1-ba67-a876c7aafc68\",\n    \"color\" : \"#AF87FF\",\n    \"position\" : {\n      \"x\" : 0.0,\n      \"y\" : 0.0,\n      \"z\" : 8.472136\n    },\n    \"rotation\" : {\n      \"x\" : 1.0,\n      \"y\" : 0.0,\n      \"z\" : 0.0,\n      \"w\" : 0.0\n    }\n  }, {\n    \"shape\" : \"73c8f4c7-caea-4017-9de0-8bfc11e8f413\",\n    \"color\" : \"#FFFFFF\",\n    \"position\" : {\n      \"x\" : 2.618034,\n      \"y\" : -2.618034,\n      \"z\" : 2.618034\n    }\n  }, {\n    \"shape\" : \"73c8f4c7-caea-4017-9de0-8bfc11e8f413\",\n    \"color\" : \"#FFFFFF\",\n    \"position\" : {\n      \"x\" : 0.0,\n      \"y\" : 0.0,\n      \"z\" : 8.472136\n    }\n  }, {\n    \"shape\" : \"4ea04789-61d1-4894-a953-273276a9edfb\",\n    \"color\" : \"#750032\",\n    \"position\" : {\n      \"x\" : -4.236068,\n      \"y\" : -4.236068,\n      \"z\" : 4.236068\n    },\n    \"rotation\" : {\n      \"x\" : -0.5,\n      \"y\" : -0.5,\n      \"z\" : -0.5,\n      \"w\" : 0.5\n    }\n  }, {\n    \"shape\" : \"7f5d4f02-4610-49a1-ba67-a876c7aafc68\",\n    \"color\" : \"#AF87FF\",\n    \"position\" : {\n      \"x\" : 2.618034,\n      \"y\" : -2.618034,\n      \"z\" : 2.618034\n    },\n    \"rotation\" : {\n      \"x\" : 0.5,\n      \"y\" : -0.5,\n      \"z\" : 0.5,\n      \"w\" : 0.5\n    }\n  }, {\n    \"shape\" : \"d9450062-9d65-4095-8f24-56c41751ac36\",\n    \"color\" : \"#F0A000\",\n    \"position\" : {\n      \"x\" : -4.236068,\n      \"y\" : -4.236068,\n      \"z\" : 4.236068\n    },\n    \"rotation\" : {\n      \"x\" : 0.0,\n      \"y\" : 0.0,\n      \"z\" : 0.0,\n      \"w\" : 1.0\n    }\n  } ]\n}","\nimport { fetchModel, download } from './files'\nimport DEFAULT_MODEL from '../models/logo'\nimport { startProgress, stopProgress } from './progress'\n\n// These are dispatched from Java\nconst SHAPE_DEFINED    = 'SHAPE_DEFINED'\nconst INSTANCE_ADDED   = 'INSTANCE_ADDED'\nconst INSTANCE_COLORED = 'INSTANCE_COLORED'\nconst INSTANCE_REMOVED = 'INSTANCE_REMOVED'\nconst MODEL_LOAD_STARTED = 'MODEL_LOAD_STARTED'\nexport const MODEL_LOADED     = 'MODEL_LOADED'\nconst LOAD_FAILED      = 'LOAD_FAILED'\n\nconst CONTROLLER_RETURNED = 'CONTROLLER_RETURNED'\n\nconst JAVA_CODE_LOADED = 'JAVA_CODE_LOADED'\nexport const FILE_EXPORTED = 'FILE_EXPORTED'\n\nexport const exportTriggered = ( extension, message ) => async (dispatch, getState) =>\n{\n  dispatch( startProgress( message ) )\n  const controller = getState().java.controller\n  const path = \"/\" + getState().java.fileName.replace( \".vZome\", \".\" + extension )\n  const file = await createWriteableFile( path )\n  callObjectMethod( controller, \"doFileAction\", \"export.\" + extension, file ).then( () =>\n  {\n    dispatch( stopProgress() )\n  })\n}\n\nconst normalize = ( instance ) =>\n{\n  const pos = instance.position\n  const quat = instance.rotation\n  const rotation = quat? [ quat.x, quat.y, quat.z, quat.w ] : [ 1, 0, 0, 0 ]\n  return { ...instance, shapeId: instance.shape, position: [ pos.x, pos.y, pos.z ], rotation }\n}\n\nconst initialState = {\n  javaReady: false,\n  parser: undefined,\n  readOnly: true,\n  renderingOn: true,\n  controller: undefined,\n  fileName: undefined,\n  shapes: DEFAULT_MODEL.shapes,\n  instances: DEFAULT_MODEL.instances.map( normalize ),\n  previous: DEFAULT_MODEL.instances.map( normalize )\n}\n\nexport const reducer = ( state = initialState, action ) => {\n  switch (action.type) {\n\n    case JAVA_CODE_LOADED:\n      return { ...state, javaReady: true, parser: action.payload }\n\n    case MODEL_LOAD_STARTED:\n      return {\n        ...state,\n        fileName: action.payload,\n        renderingOn: false,\n        controller: undefined,\n        instances: [],\n        previous: state.instances\n      }\n\n    case SHAPE_DEFINED:\n      // note, we don't need to map the vertices any more\n      return {\n        ...state,\n        shapes: [\n          ...state.shapes,\n          action.payload\n        ]\n      }\n  \n    case INSTANCE_ADDED:\n      return {\n        ...state,\n        instances: [\n          ...state.instances,\n          normalize( action.payload )\n        ]\n      }\n\n    case INSTANCE_COLORED: {\n      let index = state.instances.findIndex( item => ( item.id === action.payload.id ) )\n      if ( index >= 0 ) {\n        return {\n          ...state,\n          instances: [\n            ...state.instances.slice(0,index),\n            {\n              ...state.instances[ index ],\n              color: action.payload.color\n            },\n            ...state.instances.slice(index+1)\n          ]\n        }\n      }\n      return state\n    }\n\n    case INSTANCE_REMOVED: {\n      let index = state.instances.findIndex( item => ( item.id === action.payload.id ) )\n      if ( index >= 0 ) {\n        return {\n          ...state,\n          instances: [\n            ...state.instances.slice(0,index),\n            ...state.instances.slice(index+1)\n          ]\n        }\n      }\n      return state\n    }\n\n    case MODEL_LOADED:\n      return {\n        ...state,\n        renderingOn : true,\n        previous: []\n      }\n\n    case CONTROLLER_RETURNED:\n      return {\n        ...state,\n        controller: action.payload\n      }\n  \n    case LOAD_FAILED:\n      return {\n        ...initialState\n      }\n  \n    default:\n      return state\n  }\n}\n\nexport const parseModelFile = ( name, xmlText, dispatch, getState ) =>\n{\n  dispatch( {type: MODEL_LOAD_STARTED, payload: name } )\n  dispatch( startProgress( \"Parsing vZome model, please be patient...\" ) )\n  const path = \"/str/\" + name\n  writeTextFile( path, xmlText )\n  callStaticMethod( \"com.vzome.cheerpj.JavascriptClientShim\", \"openFile\", path )\n    .then( (controller) =>\n    {\n      dispatch( { type: CONTROLLER_RETURNED, payload: controller } )\n      dispatch( stopProgress() )\n    })\n}\n\n\nconst LOG_LEVEL = 'INFO'\n\nexport const callObjectMethod = ( object, methodname, ...args ) =>\n{\n  return window.cjCall( object, methodname, ...args )\n}\n\nexport const callStaticMethod = ( classname, methodname, ...args ) =>\n{\n  return window.cjCall( classname, methodname, ...args )\n}\n\nexport const createWriteableFile = ( path ) =>\n{\n  return window.cjNew( \"java.io.File\", `/files${path}` )\n}\n\nexport const writeTextFile = ( path, text ) =>\n{\n  return window.cheerpjAddStringFile( path, text )\n}\n\nexport const init = ( window, store ) =>\n{\n  // CheerpJ Global.jsCallS requires global functions to call\n  //   from Java back into Javascript.  The simplest way to\n  //   provide global functions is to attach them to window.\n  window.dispatchToRedux = (s) => {\n    store.dispatch( JSON.parse( s ) )\n  }\n  window.fileExported = download\n\n  const resourcesToPreload = [\n    \"/lt/runtime/rt.jar.java.nio.js\",\n    \"/lt/cheerpj/Arial.ttf\",\n    \"/lts/rt.jar.c27.txt\",\n    \"/lt/runtime/rt.jar.jdk.js\",\n    \"/lts/rt.jar\",\n    \"/lts/rt.jar.c0.txt\",\n    \"/lts/rt.jar.c1.txt\",\n    \"/lt/runtime/rt.jar.java.util.function.js\",\n    \"/lts/rt.jar.c29.txt\",\n    \"/lts/rt.jar.c28.txt\",\n    \"/lts/rt.jar.c98.txt\",\n    \"/lts/rt.jar.c97.txt\",\n    \"/lts/rt.jar.c37.txt\",\n    \"/lts/rt.jar.c39.txt\",\n    \"/lts/rt.jar.c38.txt\",\n    \"/lts/rt.jar.c82.txt\",\n    \"/lts/rt.jar.c83.txt\",\n    \"/lts/rt.jar.c84.txt\",\n    \"/lts/rt.jar.c85.txt\",\n    \"/lts/rt.jar.c86.txt\",\n    \"/lts/rt.jar.c87.txt\",\n    \"/lts/rt.jar.c88.txt\",\n    \"/lts/rt.jar.c89.txt\",\n    \"/lts/rt.jar.c90.txt\",\n    \"/lts/rt.jar.c91.txt\",\n    \"/lts/rt.jar.c92.txt\",\n    \"/lts/rt.jar.c93.txt\",\n    \"/lts/rt.jar.c94.txt\",\n    \"/lts/rt.jar.c95.txt\",\n    \"/lts/rt.jar.c96.txt\",\n    \"/lts/rt.jar.c81.txt\",\n    \"/lt/runtime/rt.jar.com.sun.org.apache.xml.js\",\n    \"/lt/runtime/rt.jar.java.awt.event.js\",\n    \"/lt/cheerpj/lib/security/java.policy\",\n    \"/lt/runtime/rt.jar.sun.reflect.js\",\n    \"/lt/runtime/rt.jar.javax.swing.event.js\",\n    \"/lt/runtime/rt.jar.javax.swing.js\",\n    \"/lt/runtime/rt.jar.sun.security.provider.js\",\n    \"/lt/cheerpj/lib/security/java.security\",\n    \"/lt/runtime/rt.jar.java.lang.js\",\n    \"/lts/rt.jar.c20.txt\",\n    \"/lts/rt.jar.c21.txt\",\n    \"/lt/runtime/rt.jar.java.nio.file.js\",\n    \"/lt/runtime/rt.jar.java.util.stream.js\",\n    \"/lt/runtime/rt.jar.com.sun.java.js\",\n    \"/lt/runtime/rt.jar.com.sun.org.apache.xerces.internal.dom.js\",\n    \"/lt/runtime/rt.jar.com.sun.org.apache.xerces.internal.impl.dtd.js\",\n    \"/lt/runtime/rt.jar.java.util.concurrent.js\",\n    \"/lt/runtime/rt.jar.com.sun.xml.internal.stream.js\",\n    \"/lt/runtime/rt.jar.com.sun.org.apache.xerces.js\",\n    \"/lt/runtime/rt.jar.com.sun.org.apache.xerces.internal.impl.js\",\n    \"/lt/runtime/rt.jar.com.sun.org.apache.xerces.internal.util.js\",\n    \"/lt/runtime/rt.jar.com.sun.org.apache.xerces.internal.parsers.js\",\n    \"/lt/runtime/rt.jar.com.sun.imageio.js\",\n    \"/lt/runtime/rt.jar.com.js\",\n    \"/lts/rt.jar.c78.txt\",\n    \"/lts/rt.jar.c80.txt\",\n    \"/lts/rt.jar.c79.txt\",\n    \"/lt/runtime/rt.jar.sun.net.js\",\n    \"/lt/runtime/rt.jar.com.sun.org.apache.xml.internal.serializer.js\",\n    \"/lt/runtime/rt.jar.com.sun.org.apache.xml.internal.utils.js\",\n    \"/lt/runtime/rt.jar.com.sun.org.apache.xalan.js\",\n    \"/lt/runtime/rt.jar.sun.net.www.js\",\n    \"/lt/runtime/rt.jar.com.sun.org.apache.xalan.internal.xsltc.js\",\n    \"/lt/runtime/rt.jar.com.sun.org.apache.xerces.internal.jaxp.js\",\n    \"/lt/cheerpj/lib/jaxp.properties\",\n    \"/lt/runtime/rt.jar.javax.xml.js\",\n    \"/lt/runtime/rt.jar.java.awt.dnd.js\",\n    \"/lts/rt.jar.c22.txt\",\n    \"/lts/rt.jar.c23.txt\",\n    \"/lt/runtime/rt.jar.java.security.js\",\n    \"/lt/runtime/rt.jar.java.util.zip.js\",\n    \"/lt/runtime/rt.jar.java.util.jar.js\",\n    \"/lt/cheerpj/lib/security/local_policy.jar\",\n    \"/lts/rt.jar.c24.txt\",\n    \"/lts/rt.jar.c26.txt\",\n    \"/lts/rt.jar.c25.txt\",\n    \"/lt/runtime/rt.jar.jdk.internal.org.js\",\n    \"/lt/runtime/rt.jar.sun.js\",\n    \"/lt/runtime/rt.jar.java.lang.invoke.js\",\n    \"/lt/cheerpj/lib/accessibility.properties\",\n    \"/lt/runtime/rt.jar.sun.awt.im.js\",\n    \"/lt/cheerpj/lib/currency.properties\",\n    \"/lt/cheerpj/lib/currency.data\",\n    \"/lt/runtime/rt.jar.sun.awt.util.js\",\n    \"/lt/runtime/rt.jar.sun.nio.js\",\n    \"/lt/runtime/rt.jar.sun.text.js\",\n    \"/lt/runtime/rt.jar.java.net.js\",\n    \"/lt/cheerpj/lib/ext/localedata.jar\",\n    \"/lt/runtime/rt.jar.java.util.spi.js\",\n    \"/lt/runtime/rt.jar.sun.util.locale.js\",\n    \"/lt/runtime/rt.jar.sun.awt.geom.js\",\n    \"/lt/runtime/rt.jar.java.util.regex.js\",\n    \"/lt/runtime/rt.jar.java.js\",\n    \"/lt/runtime/rt.jar.java.awt.font.js\",\n    \"/lt/cheerpj/lib/tzdb.dat\",\n    \"/lt/runtime/rt.jar.java.io.js\",\n    \"/lt/runtime/rt.jar.sun.awt.resources.js\",\n    \"/lt/runtime/rt.jar.sun.misc.js\",\n    \"/lt/runtime/rt.jar.javax.js\",\n    \"/lt/runtime/rt.jar.java.util.logging.js\",\n    \"/lt/runtime/rt.jar.java.awt.im.js\",\n    \"/lt/runtime/rt.jar.java.beans.js\",\n    \"/lt/runtime/rt.jar.java.text.js\",\n    \"/lts/rt.jar.c2.txt\",\n    \"/lt/runtime/rt.jar.java.util.concurrent.locks.js\",\n    \"/lt/runtime/rt.jar.java.util.concurrent.atomic.js\",\n    \"/lts/rt.jar.c73.txt\",\n    \"/lts/rt.jar.c75.txt\",\n    \"/lts/rt.jar.c74.txt\",\n    \"/lt/runtime/rt.jar.java.util.js\",\n    \"/lts/meta-index.c0.txt\",\n    \"/lts/meta-index\",\n    \"/lt/runtime/rt.jar.sun.util.js\",\n    \"/lt/cheerpj/lib/logging.properties\",\n    \"/lt/runtime/rt.jar.org.js\",\n    \"/lt/runtime/rt.jar.com.sun.org.apache.xerces.internal.impl.dv.js\",\n    \"/lts/rt.jar.c19.txt\",\n    \"/lts/rt.jar.c18.txt\",\n    \"/lt/runtime/rt.jar.java.awt.js\",\n    \"/lt/runtime/rt.jar.sun.font.js\",\n    \"/lt/runtime/rt.jar.java.awt.geom.js\",\n    \"/lt/runtime/rt.jar.sun.awt.js\"\n ]\n\n  window.cheerpjInit( {\n    preloadResources: resourcesToPreload,\n    status: \"splash\",\n    javaProperties: [ \"java.protocol.handler.pkgs=com.leaningtech.handlers\" ]\n  } )\n  \n  const pp = \"/app\" + window.location.pathname + \"/\"\n  \n  const classpath = `${pp}desktop-7.0.jar:${pp}cheerpj-dom.jar:${pp}core-7.0.jar:${pp}jackson-annotations-2.9.3.jar:${pp}jackson-core-2.9.5.jar:${pp}jackson-databind-2.9.5.jar:${pp}javax.json-1.0.4.jar:${pp}vecmath-1.6.0-final.jar`\n  \n  window.cheerpjRunMain( \"com.vzome.cheerpj.JavascriptClientShim\", classpath, LOG_LEVEL ).then( () =>\n  {\n    store.dispatch( { type: JAVA_CODE_LOADED, payload: parseModelFile })\n\n    let url = \"/app/models/vZomeLogo.vZome\"\n    const urlParams = new URLSearchParams( window.location.search );\n    if ( urlParams.has( \"url\" ) ) {\n      url = decodeURI( urlParams.get( \"url\" ) )\n    }\n    store.dispatch( fetchModel( url ) )\n  } )\n}\n","\nconst LIGHTS_DEFINED = 'LIGHTS_DEFINED'\n\nconst initialState = {\n  backgroundColor: '#BBDAED',\n  ambientColor: '#292929',\n  directionalLights: [ // These are the vZome defaults, for consistency\n    { direction: [ 1, -1, -1 ], color: '#EBEBE4' },\n    { direction: [ -1, 0, 0 ], color: '#E4E4EB' },\n    { direction: [ 0, 0, -1 ], color: '#1E1E1E' }\n  ]\n}\n\nconst mapLightDir = ( { color, direction } ) => ({\n  color,\n  direction: [ ...Object.values( direction ) ] // from {x,y,z} to [x,y,z]\n})\n\nexport const reducer = ( state = initialState, action ) => {\n  switch (action.type) {\n\n    case LIGHTS_DEFINED:\n      return {\n        ...state,\n        ...action.payload,\n        directionalLights: action.payload.directionalLights.map( mapLightDir )\n      }\n\n    default:\n      return state\n  }\n}\n","\nimport * as mesh from '../bundles/mesh'\nimport * as designs from '../bundles/models'\n\nexport default () => ( dispatch, getState ) =>\n{\n  let { shown, hidden, selected } = designs.selectCurrentMesh( getState() )\n  const field = designs.selectCurrentField( getState() )\n  shown = new Map( shown )\n\n  const scale = field.createRational( 1, selected.size )\n  let sum = undefined\n  for ( let [id, instance] of selected ) {\n    shown.set( id, instance )\n    if ( sum ) {\n      sum = field.vectoradd( sum, instance.vectors[0] )\n    }\n    else {\n      sum = instance.vectors[0]\n    }\n  }\n  const vectors = [ field.scalarmul( scale, sum ) ] // canonically, all mesh objects are arrays of vectors\n  let newBall = mesh.createInstance( vectors )\n  const { id } = newBall\n\n  // Avoid creating a duplicate... make this reusable\n  newBall = shown.get( id ) || selected.get( id ) || hidden.get( id ) || newBall\n  shown.delete( id ) || selected.delete( id ) || hidden.delete( id )\n\n  selected = new Map().set( newBall.id, newBall )\n  dispatch( mesh.meshChanged( shown, selected, hidden ) )\n}","\nimport * as mesh from '../bundles/mesh'\nimport * as designs from '../bundles/models'\n\nexport default () => ( dispatch, getState ) =>\n{\n  let { shown, hidden, selected } = designs.selectCurrentMesh( getState() )\n  const field = designs.selectCurrentField( getState() )\n  shown = new Map( shown )\n\n  const red = [ [ 2, 3, 1 ], [ 1, 2, 1 ], [ 0, 0, 1 ] ]\n  let start = undefined\n  for ( let [id, instance] of selected ) {\n    shown.set( id, instance )\n    if ( ! start ) {\n      start = instance.vectors[0]  // ball, strut, whatever\n    }\n  }\n  // shown now has all the previously selected mesh objects\n  const end = field.vectoradd( start, red )\n  let newBall = mesh.createInstance( [ end ] ) // canonically, all mesh objects are arrays of vectors\n  let newStrut = mesh.createInstance( [ start, end ] )\n\n  // Avoid creating a duplicate... make this reusable\n  newBall = shown.get( newBall.id ) || selected.get( newBall.id ) || hidden.get( newBall.id ) || newBall\n  shown.delete( newBall.id ) || selected.delete( newBall.id ) || hidden.delete( newBall.id )\n\n  newStrut = shown.get( newStrut.id ) || selected.get( newStrut.id ) || hidden.get( newStrut.id ) || newStrut\n  shown.delete( newStrut.id ) || selected.delete( newStrut.id ) || hidden.delete( newStrut.id )\n\n  selected = new Map().set( newStrut.id, newStrut ).set( newBall.id, newBall )\n  dispatch( mesh.meshChanged( shown, selected, hidden ) )\n}","\nimport centroid from './centroid'\nimport shortred from './shortred'\nimport buildstrut from './buildstrut'\nimport { allSelected, allDeselected } from '../bundles/mesh'\n\nconst COMMANDS_DEFINED = 'COMMANDS_DEFINED'\n\nexport const init = ( window, store ) =>\n{\n  store.dispatch( commandsDefined( { centroid, shortred, buildstrut } ) )\n}\n\nexport const commandsDefined = ( commands ) => ({ type: COMMANDS_DEFINED, payload: commands })\n\nexport const commandTriggered = ( cmd, config={} ) => ( dispatch, getState ) =>\n{\n  switch ( cmd ) {\n  \n    case 'allSelected':\n      dispatch( allSelected() )\n      break;\n  \n    case 'allDeselected':\n      dispatch( allDeselected() )\n      break;\n\n    default:\n      const state = getState().commands\n      const command = state[ cmd ]\n      dispatch( command( config ) )\n  }\n}\n\nexport const reducer = ( state = {}, action ) =>\n{\n  switch (action.type) {\n\n    case COMMANDS_DEFINED: {\n      const newCommands = action.payload\n      return {\n        ...state,\n        ...newCommands\n      }\n    }\n            \n    default:\n      return state\n  }\n}\n","\n\nexport const shaperDefined = ( name, shaper ) => ({ type: 'SHAPER_DEFINED', payload: { name, shaper } } )\n\nexport const reducer = ( state = {}, action ) =>\n{\n  switch ( action.type ) {\n\n    case 'SHAPER_DEFINED': {\n      const { name, shaper } = action.payload\n      return {\n        ...state,\n        [ name ]: shaper\n      }\n    }\n\n    default:\n      return state\n  }\n}","\nimport { Group } from '@material-ui/icons'\nimport * as mesh from './mesh'\n\nexport default class Adapter\n{\n  constructor( shown, selected, hidden, groups=[] )\n  {\n    this.shown = shown\n    this.hidden = hidden\n    this.selected = selected\n    this.groups = groups\n  }\n\n  // Selection methods\n\n  clone()\n  {\n    return new Adapter( new Map( this.shown ), new Map( this.selected ), new Map( this.hidden ), [ ...this.groups ] )\n  }\n\n  selectAll()\n  {\n    const temp = this.selected\n    this.selected = this.shown\n    this.shown = temp\n  }\n\n  clearSelection()\n  {\n    const temp = this.shown\n    this.shown = this.selected\n    this.selected = temp\n  }\n\n  select( vectors )\n  {\n    const { id } = mesh.createInstance( vectors )\n    if ( this.selected.has( id ) )\n      return // idempotent\n    const instance = this.shown.get( id )\n    if ( ! instance ) {\n      throw new Error( `No shown instance to select at ${id}`)\n    }\n    this.shown.delete( id )\n    this.selected.set( id, instance )\n  }\n\n  unselect( vectors )\n  {\n    const { id } = mesh.createInstance( vectors )\n    const instance = this.selected.get( id )\n    this.selected.delete( id )\n    this.shown.set( id, instance )\n  }\n\n  selectionSize()\n  {\n    return this.selected.size\n  }\n\n  selectedIterator()\n  {\n    return Array.from( this.selected.values() ).map( instance => instance.vectors ).values()\n  }\n\n  createGroup()\n  {\n    if ( this.selectionIsGroup() )\n      return\n    const group = Array.from( this.selected.keys() )\n    this.groups.push( group )\n  }\n\n  disbandGroup()\n  {\n    this.groups = this.groups.filter( group =>\n      ( group.length !== this.selected.size ) || ( group.some( id => ! this.selected.has( id ) ) ) )\n  }\n\n  createLegacyGroup()\n  {\n    throw new Error( \"createLegacyGroup is not yet implemented\" )\n  }\n\n  disbandLegacyGroup()\n  {\n    throw new Error( \"disbandLegacyGroup is not yet implemented\" )\n  }\n\n  selectWithGrouping( vectors )\n  {\n    const { id } = mesh.createInstance( vectors )\n    if ( this.selected.has( id ) )\n      return\n    const group = this.getLargestGroup( vectors )\n    if ( group ) {\n      group.forEach( id => {\n        const instance = this.shown.get( id ) || this.selected.get( id )\n        this.shown.delete( id )\n        this.selected.set( id, instance )\n      });\n    } else {\n      const instance = this.shown.get( id )\n      if ( ! instance ) {\n        throw new Error( `No shown instance to select at ${id}`)\n      }\n      this.shown.delete( id )\n      this.selected.set( id, instance )\n    }\n  }\n\n  unselectWithGrouping( vectors )\n  {\n    const { id } = mesh.createInstance( vectors )\n    if ( ! this.selected.has( id ) )\n      return\n    const group = this.getLargestGroup( vectors )\n    if ( group ) {\n      group.forEach( id => {\n        const instance = this.shown.get( id ) || this.selected.get( id )\n        this.selected.delete( id )\n        this.shown.set( id, instance )\n      });\n    } else {\n      const instance = this.selected.get( id )\n      this.selected.delete( id )\n      this.shown.set( id, instance )\n    }\n  }\n\n  selectionIsGroup()\n  {\n    return !! this.getSelectionGroup()\n  }\n\n  getSelectionGroup()\n  {\n    const selectionSize = this.selected.size\n    if ( selectionSize === 0 )\n      return false;\n    return this.groups.find( group => ( group.length === selectionSize ) && ( group.every( id => this.selected.has( id ) ) ) )\n  }\n\n  // RealizedModel calls\n\n  getLargestGroup( vectors )\n  {\n    const { id } = mesh.createInstance( vectors )\n    const matchingGroups = this.groups.filter( group => group.includes( id ) )\n    if ( matchingGroups.length === 0 )\n      return null\n\n    let largestGroup\n    let largestSize = 0\n    matchingGroups.map( group => {\n      if ( group.length > largestSize ) {\n        largestGroup = group\n        largestSize = group.length\n      }\n    })\n    return largestGroup && largestGroup.map( id => ( this.selected.get( id ) || this.shown.get( id ) ).vectors )\n  }\n\n  delete( vectors )\n  {\n    const { id } = mesh.createInstance( vectors )\n    this.shown.delete( id )\n    this.selected.delete( id )\n    this.hidden.delete( id )\n  }\n\n  manifestationRendered( vectors )\n  {\n    const { id } = mesh.createInstance( vectors )\n    return this.shown.has( id ) || this.selected.has( id )\n  }\n\n  manifestationHidden( vectors )\n  {\n    const { id } = mesh.createInstance( vectors )\n    return this.hidden.has( id )\n  }\n\n  manifestationSelected( vectors )\n  {\n    const { id } = mesh.createInstance( vectors )\n    return this.selected.has( id )\n  }\n\n  manifestationHasColor( vectors )\n  {\n    const { id } = mesh.createInstance( vectors )\n    const existing = this.shown.get( id ) || this.selected.get( id )\n    return existing && !!existing.color\n  }\n\n  manifestationColor( vectors )\n  {\n    const { id } = mesh.createInstance( vectors )\n    const existing = this.shown.get( id ) || this.selected.get( id )\n    return existing.color\n  }\n\n  setManifestationColor( vectors, color )\n  {\n    const instance = mesh.createInstance( vectors )\n    instance.color = color\n    if ( this.shown.has( instance.id ) ) {\n      this.shown.set( instance.id, instance )\n    } else if ( this.selected.has( instance.id ) ) {\n      this.selected.set( instance.id, instance )\n    }\n  }\n\n  findOrCreateManifestation( vectors )\n  {\n    const created = mesh.createInstance( vectors )\n    const { id } = created\n    const existing = this.shown.get( id ) || this.hidden.get( id ) || this.selected.get( id )\n    if ( existing )\n      return existing.vectors;\n    // TODO avoid creating zero-length struts, to match Java semantics of RMI.findConstruction\n    return vectors\n  }\n\n  showManifestation( vectors )\n  {\n    let instance = mesh.createInstance( vectors )\n    if ( this.shown.has( instance.id ) || this.selected.has( instance.id ) )\n      return // idempotent\n    this.hidden.delete( instance.id )\n    this.shown.set( instance.id, instance )\n  }\n\n  hideManifestation( vectors )\n  {\n    let instance = mesh.createInstance( vectors )\n    instance = this.shown.get( instance.id ) || this.selected.get( instance.id ) || this.hidden.get( instance.id ) || instance\n    this.selected.delete( instance.id ) || this.shown.delete( instance.id )\n    this.hidden.set( instance.id, instance )\n  }\n\n  allIterator()\n  {\n    const shownArray = Array.from( this.shown.values() )\n    const selectedArray = Array.from( this.selected.values() )\n    const hiddenArray = Array.from( this.hidden.values() )\n    const all = [ ...shownArray, ...selectedArray, ...hiddenArray ]\n    return all.map( instance => instance.vectors ).values()\n  }\n}","\nimport * as mesh from './mesh'\nimport { commandsDefined } from '../commands'\nimport * as planes from './planes'\nimport goldenField from '../fields/golden'\nimport { startProgress, stopProgress } from './progress'\nimport { parseViewXml } from './camera'\nimport { showAlert } from './alerts'\nimport { fetchModel } from './files'\nimport * as designs from './models'\nimport { meshChanged } from './mesh'\nimport * as shapers from './shapers'\nimport { ActionCreators } from 'redux-undo';\nimport Adapter from './adapter'\n\n\n// I can't use the ES6 module approach until I figure out how to use J4TS that way.\n//  For now, I can load the bundles in index.html, and access the packages through window.\n//\n// I should be able to use require() and a commonjs module, but it has the same J4TS build problem.\n\nconst PARSER_READY = 'PARSER_READY'\nconst WORK_STARTED = 'WORK_STARTED'\nconst WORK_FINISHED = 'WORK_FINISHED'\n\nconst initialState = {\n  readOnly: false,\n  parser: undefined,       // ANTI-PATTERN, not a plain Object\n  working: false,\n}\n\nexport const reducer = ( state = initialState, action ) =>\n{\n  switch ( action.type ) {\n\n    case PARSER_READY: {\n      return { ...state, parser: action.payload }\n    }\n\n    case WORK_STARTED: {\n      return { ...state, working: true }\n    }\n\n    case WORK_FINISHED: {\n      return { ...state, working: false }\n    }\n\n    default:\n      return state\n  }\n}\n\n// Copied from core/src/main/resources/com/vzome/core/editor/defaultPrefs.properties\nconst defaults = {\n\n  \"color.red\": \"175,0,0\",\n  \"color.yellow\": \"240,160,0\",\n  \"color.blue\": \"0,118,149\",\n  \"color.green\": \"0,141,54\",\n  \"color.orange\": \"220,76,0\",\n  \"color.purple\": \"108,0,198\",\n  \"color.black\": \"30,30,30\",\n  \"color.white\": \"225,225,225\",\n  \"color.olive\": \"100,113,0\",\n  \"color.lavender\": \"175,135,255\",\n  \"color.maroon\": \"117,0,50\",\n  \"color.rose\": \"255,51,143\",\n  \"color.navy\": \"0,0,153\",\n  \"color.brown\": \"107,53,26\",\n  \"color.apple\": \"116,195,0\",\n  \"color.sand\": \"154,117,74\",\n  \"color.turquoise\": \"18,205,148\",\n  \"color.coral\": \"255,126,106\",\n  \"color.sulfur\": \"230,245,62\",\n  \"color.cinnamon\": \"136,37,0\",\n  \"color.spruce\": \"18,73,48\",\n  \"color.magenta\": \"255,41,183\",\n  \"color.snubPentagon\": \"187,57,48\",\n  \"color.snubTriangle\": \"87,188,48\",\n  \"color.snubDiagonal\": \"228,225,199\",\n  \"color.snubFaceNormal\": \"216,216,208\",\n  \"color.snubVertex\": \"204,204,0\",\n  \"color.slate\": \"108, 126, 142\",\n  \"color.mauve\": \"137, 104, 112\",\n  \"color.ivory\": \"228,225,199\",\n  \"color.panels\": \"225,225,225\",\n  \"color.background\": \"175,200,220\",\n  \"color.highlight\": \"195,195,195\",\n  \"color.highlight.mac \": \"153,255,0\",\n  \"color.light.directional.1\": \"235, 235, 228\",\n  \"color.light.directional.2\": \"228, 228, 235\",\n  \"color.light.directional.3\": \"30, 30, 30\",\n  \"color.light.ambient\": \"41, 41, 41\",\n\n  // direction values are given as \"x,y,z\", a vector of real numbers.\n  // The X axis points to the right of your screen, the Y axis points to\n  // the top of the screen, and the Z axis points out of the screen toward you.\n  \"direction.light.1\": \"1.0,-1.0,-1.0\",\n  \"direction.light.2\": \"-1.0,0.0,0.0\",\n  \"direction.light.3\": \"0.0,0.0,-1.0\",\n}\n\nconst knownOrbitNames = [\n  \"apple\",\n  \"black\",\n  \"blue\",\n  \"brown\",\n  \"cinnamon\",\n  \"connector\",\n  \"coral\",\n  \"green\",\n  \"lavender\",\n  \"maroon\",\n  \"navy\",\n  \"olive\",\n  \"orange\",\n  \"purple\",\n  \"red\",\n  \"rose\",\n  \"sand\",\n  \"snubDiagonal\",\n  \"snubPentagon\",\n  \"snubTriangle\",\n  \"spruce\",\n  \"sulfur\",\n  \"turquoise\",\n  \"yellow\",\n]\n\nconst shapeNames = [\n  'bigzome',\n  'default',\n  'dodecagon3d',\n  'dodecs',\n  'heptagon/antiprism',\n  'lifelike',\n  'moves.sh',\n  'noTwist',\n  'octahedral',\n  'octahedralFast',\n  'octahedralRealistic',\n  'pentagonal',\n  'rootThreeOctaSmall',\n  'rootTwo',\n  'rootTwoBig',\n  'rootTwoSmall',\n  'sqrtPhi/fivefold',\n  'sqrtPhi/zome',\n  'sqrtPhi/tinyIcosahedra',\n  'sqrtPhi/octahedra',\n  'tiny',\n  'vienne',\n  'vienne2',\n  'vienne3'\n]\n\n// Initialization\n\nconst makeQuaternions = ( matrices ) =>\n{\n  return matrices.map( am => {\n    let m = [[],[],[]]\n    for ( let i = 0; i < 3; i++) {\n      for ( let j = 0; j < 3; j++) {\n        const an = am.getElement( i, j );\n        m[ i ][ j ] = an.evaluate()\n      }\n    }\n    return matrix2quat( m )\n  });\n}\n\n// Due to Mike Day, Insomniac Games\n//   https://d3cw3dd2w32x2b.cloudfront.net/wp-content/uploads/2015/01/matrix-to-quat.pdf\nconst matrix2quat = ( m ) =>\n{\n  const [ [ m00, m10, m20 ],\n          [ m01, m11, m21 ],\n          [ m02, m12, m22 ],\n        ] = m\n  let t\n  let q\n  if (m22 < 0) {\n    if (m00 > m11) {\n      t = 1 + m00 - m11 - m22\n      q = [ t, m01 + m10, m20 + m02, m12 - m21 ]\n    }\n    else {\n      t = 1 - m00 + m11 - m22\n      q = [ m01 + m10, t, m12 + m21, m20 - m02 ]\n    }\n  }\n  else {\n    if (m00 < -m11) {\n      t = 1 - m00 - m11 + m22\n      q = [ m20 + m02, m12 + m21, t, m01 - m10 ]\n    }\n    else {\n      t = 1 + m00 + m11 + m22\n      q = [ m12 - m21, m20 - m02, m01 - m10, t ]\n    }\n  }\n  return q.map( x => x * 0.5 / Math.sqrt(t) )\n}\n\nexport const init = async ( window, store ) =>\n{\n  const vzomePkg = window.com.vzome\n  const util = window.java.util\n\n  class ImportColoredMeshJson extends vzomePkg.core.edits.ImportMesh\n  {\n    parseMeshData( offset, events, registry )\n    {\n      const coloredMesh = JSON.parse( this.meshData )\n      const field = registry.getField( coloredMesh.field )\n      const vertices = coloredMesh.vertices.map( nums => {\n        let vertex = field.createIntegerVectorFromTDs( nums )\n        if ( vertex.dimension() > 3 )\n            vertex = this.projection.projectImage( vertex, false )\n        if ( offset != null )\n            vertex = offset.plus( vertex )\n        return vertex\n      } )\n      // TODO: handle legacy format; see ColoredMeshJson.java\n      coloredMesh.balls.forEach( ball => {\n        const vertex = vertices[ ball.vertex ]\n        const color = ball.color && vzomePkg.core.construction.Color.parseWebColor( ball.color )\n        events.constructionAdded( new vzomePkg.core.construction.FreePoint( vertex ), color );\n      });\n      coloredMesh.struts.forEach( strut => {\n        const point1 = new vzomePkg.core.construction.FreePoint( vertices[ strut.vertices[ 0 ] ] )\n        const point2 = new vzomePkg.core.construction.FreePoint( vertices[ strut.vertices[ 1 ] ] )\n        const color = strut.color && vzomePkg.core.construction.Color.parseWebColor( strut.color )\n        events.constructionAdded( new vzomePkg.core.construction.SegmentJoiningPoints( point1, point2 ), color );\n      });\n      // TODO: handle panels\n    }\n  }\n\n  class ImportSimpleMeshJson extends vzomePkg.core.edits.ImportMesh\n  {\n    parseMeshData( offset, events, registry )\n    {\n      const simpleMesh = JSON.parse( this.meshData )\n      const field = registry.getField( simpleMesh.field || 'golden' )\n      const vertices = simpleMesh.vertices.map( nums => {\n        let vertex = field.createIntegerVectorFromTDs( nums )\n        if ( vertex.dimension() > 3 )\n            vertex = this.projection.projectImage( vertex, false )\n        if ( offset != null )\n            vertex = offset.plus( vertex )\n        return vertex\n      } )\n      simpleMesh.edges.forEach( strut => {\n        const point1 = new vzomePkg.core.construction.FreePoint( vertices[ strut[ 0 ] ] )\n        const point2 = new vzomePkg.core.construction.FreePoint( vertices[ strut[ 1 ] ] )\n        events.constructionAdded( point1 )\n        events.constructionAdded( point2 )\n        events.constructionAdded( new vzomePkg.core.construction.SegmentJoiningPoints( point1, point2 ) );\n      });\n      // TODO: handle panels\n    }\n  }\n\n  const xmlToEditClass = editName =>\n  {\n    const legacyNames = {\n      setItemColor: \"ColorManifestations\",\n      BnPolyope: \"B4Polytope\",\n      DeselectByClass: \"AdjustSelectionByClass\",\n      realizeMetaParts: \"RealizeMetaParts\",\n      SelectSimilarSize: \"AdjustSelectionByOrbitLength\",\n      zomic: \"RunZomicScript\",\n      py: \"RunPythonScript\",\n      apiProxy: \"ApiEdit\",\n    }\n    editName = legacyNames[ editName ] || editName\n    return vzomePkg.core.edits[ editName ] || vzomePkg.core.editor[ editName ]\n  }\n\n  const editFactory = ( editor, toolFactories, toolsModel ) => xmlElement =>\n  {\n    let editName = xmlElement.getLocalName()\n    if ( editName === \"Snapshot\" )\n      return null\n\n    if ( editName === \"ImportColoredMeshJson\" )\n      return new ImportColoredMeshJson( editor )\n\n    if ( editName === \"ImportSimpleMeshJson\" )\n      return new ImportSimpleMeshJson( editor )\n\n    if ( toolsModel ) {\n      const toolEdit = toolsModel.createEdit( editName );\n      if ( toolEdit )\n          return toolEdit;\n    }\n\n    const toolId = xmlElement.getAttribute( \"name\" );\n    if ( toolId ) {\n      const factory = toolFactories.get( editName )\n      if ( factory ) {\n        const edit = factory.deserializeTool( toolId );\n        if ( edit )\n          return edit\n      }\n    }\n\n    const editClass = xmlToEditClass( editName )\n    if ( editClass )\n      return new editClass( editor )\n    else\n      return new vzomePkg.core.editor.CommandEdit( null, editor )\n  }\n\n  const injectResource = async ( path ) =>\n  {\n    const fullPath = `/app/resources/${path}`\n    const response = await fetch( fullPath )\n    if ( ! response.ok ) {\n      console.log( `No resource for ${fullPath}` )\n      return\n    }\n    const text = await response.text()\n    // Inject the VEF into a static map on ExportedVEFShapes\n    if ( text[ 0 ] === \"<\" ) {\n      // HTML from a 404, just skip it\n      return\n    }\n    vzomePkg.xml.ResourceLoader.injectResource( path, text )\n    console.log( `injected resource ${path}` )\n  }\n\n  // Initialize the field application\n  await Promise.all( [\n    injectResource( 'com/vzome/core/math/symmetry/binaryTetrahedralGroup.vef' ),\n    injectResource( 'com/vzome/core/math/symmetry/H4roots-rotationalSubgroup.vef' ),\n    injectResource( 'com/vzome/core/math/symmetry/H4roots.vef' ),\n  ] )\n  const properties = new Properties( defaults )\n  const colors = new vzomePkg.core.render.Colors( properties )\n  const gfield = new vzomePkg.jsweet.JsAlgebraicField( goldenField )\n  const fieldApps = { golden: new vzomePkg.core.kinds.GoldenFieldApplication( gfield ) }\n\n  // This object implements the UndoableEdit.Context interface\n  const editContext = {\n    // Since we are not creating Branch edits, this should never be used\n    createEdit: () => { throw new Error( \"createEdit should never be called\" ) },\n\n    createLegacyCommand: name => {\n      const constructor = vzomePkg.core.commands[ name ]\n      if ( constructor )\n        return new constructor()\n      else\n        throw new Error( `${name} command is not available yet`)\n    },\n    \n    // We will do our own edit recording, so this is just perform\n    performAndRecord: edit => edit.perform()\n  }\n\n  const documentFactory = ( fieldName, namespace, xml ) =>\n  {\n    // This reproduces the DocumentModel constructor pretty faithfully\n\n    const fieldApp = fieldApps[ fieldName ]\n    if ( ! fieldApp )\n      throw new Error( `Field \"${fieldName}\" is not supported yet.` )\n    const field = fieldApp.getField()\n\n    const originPoint = new vzomePkg.core.construction.FreePoint( field.origin( 3 ) )\n\n    const systemXml = xml && xml.getChildElement( \"SymmetrySystem\" )\n    const symmName = systemXml && systemXml.getAttribute( \"name\" )\n    const symmPer = ( symmName && fieldApp.getSymmetryPerspective( symmName ) ) || fieldApp.getDefaultSymmetryPerspective()\n\n    const toolsModel = new vzomePkg.core.editor.ToolsModel( editContext, originPoint )\n\n    // Initialize the default SymmetrySystems from the FieldApplication\n    const symmetrySystems = {}\n    const symmPerspectives = fieldApp.getSymmetryPerspectives().iterator()\n    while ( symmPerspectives.hasNext() ) {\n      const perspective = symmPerspectives.next()\n      const osm = new vzomePkg.core.editor.SymmetrySystem( null, perspective, editContext, colors, true )\n      symmetrySystems[ osm.getName() ] = osm\n    }\n\n    // Now overwrite some or all of those default SymmetrySystems with those stored in the file.\n    //   This is important mostly for the automatic orbits, but can also carry color overrides.\n    const orbitSource = new vzomePkg.core.editor.SymmetrySystem( systemXml, symmPer, editContext, colors, true )\n    symmetrySystems[ symmPer.getName() ] = orbitSource\n    // if ( this .mXML != null ) {\n    //     NodeList nl = this .mXML .getElementsByTagName( \"OtherSymmetries\" );\n    //     if ( nl .getLength() != 0 ) {\n    //         xml = (Element) nl .item( 0 );\n    //         NodeList nodes = xml .getElementsByTagName( \"SymmetrySystem\" );\n    //         for ( int i = 0; i < nodes .getLength(); i++ ) {\n    //             Node node = nodes .item( i );\n    //             if ( node instanceof Element ) {\n    //                 Element symmElem = (Element) node;\n    //                 String symmName = symmElem .getAttribute( \"name\" );  \n    //                 symmPerspective = kind .getSymmetryPerspective( symmName );\n    //                 SymmetrySystem otherSymmetrySystem = new SymmetrySystem( symmElem, symmPerspective, this, app .getColors(), true );\n    //                 this .symmetrySystems .put( symmName, otherSymmetrySystem );\n    //             }\n    //         }\n    //     }\n    //     }\n\n    orbitSource.quaternions = makeQuaternions( orbitSource.getSymmetry().getMatrices() )\n    const orbitSetField = {\n      __interfaces: [ \"com.vzome.core.math.symmetry.OrbitSet.Field\" ],\n      getGroup: name => symmetrySystems[ name ].getOrbits(),\n      getQuaternionSet: name => fieldApp.getQuaternionSymmetry( name )\n    }\n\n    const format = namespace && vzomePkg.core.commands.XmlSymmetryFormat.getFormat( namespace )\n    format && format.initialize( field, orbitSetField, 0, \"vZome Online\", new util.Properties() )\n\n    const toolFactories = new util.HashMap()\n    fieldApp.registerToolFactories( toolFactories, toolsModel )\n\n    const realizedModel = new vzomePkg.jsweet.JsRealizedModel( field )\n    const selection = new vzomePkg.jsweet.JsSelection( field )\n    const editor = new vzomePkg.jsweet.JsEditorModel( realizedModel, selection, fieldApp, orbitSource, symmetrySystems )\n    \n    toolsModel.setEditorModel( editor )\n    orbitSource.createToolFactories( toolsModel ) // needed to register built-in tools\n    const bookmarkFactory = new vzomePkg.core.tools.BookmarkTool.Factory( toolsModel );\n    bookmarkFactory.createPredefinedTool( \"ball at origin\" );\n\n    const toolsXml = xml && xml.getChildElement( \"Tools\" )\n    toolsXml && toolsModel.loadFromXml( toolsXml )\n\n    const shaper = shaperFactory( vzomePkg, orbitSource )\n    shaper.shapesName = orbitSource.getShapes().getName()\n\n    const createEditFromXml = xmlElement =>\n    {\n      const edit = editFactory( editor, toolFactories, toolsModel )( xmlElement )\n      if ( ! edit )\n        return undefined\n      edit.deserializeAndPerform = ( adapter ) => {\n        editor.setAdapter( adapter )\n        edit.loadAndPerform( xmlElement, format, editContext )\n      }\n      return edit\n    }\n\n    const configureAndPerformEdit = ( className, config, adapter ) =>\n    {\n      const edit = editFactory( editor, toolFactories, toolsModel )( new JavaDomElement( { localName: className } ) )\n      if ( ! edit )\n        return\n      editor.setAdapter( adapter )\n      edit.configure( new Properties( config ) )\n      edit.perform()\n    }\n\n    return { shaper, createEditFromXml, configureAndPerformEdit }\n  }\n\n  // Discover all the legacy edit classes and register as commands\n  const commands = {}\n  for ( const name of Object.keys( vzomePkg.core.edits ) )\n    commands[ name ] = legacyCommandFactory( documentFactory, name )\n  store.dispatch( commandsDefined( commands ) )\n\n  // Prepare the orbitSource for resolveShapes\n  const symmPer = fieldApps.golden.getDefaultSymmetryPerspective()\n  const orbitSource = new vzomePkg.core.editor.SymmetrySystem( null, symmPer, editContext, colors, true )\n  orbitSource.quaternions = makeQuaternions( orbitSource.getSymmetry().getMatrices() )\n  const shaper = shaperFactory( vzomePkg, orbitSource )\n  const shaperName = orbitSource.getShapes().getName()    \n\n  const blue = [ [0,0,1], [0,0,1], [1,0,1] ]\n  const yellow = [ [0,0,1], [1,0,1], [1,1,1] ]\n  const red = [ [1,0,1], [0,0,1], [0,1,1] ]\n  const green = [ [1,0,1], [1,0,1], [0,0,1] ]\n  const gridPoints = vzomePkg.jsweet.JsAdapter.getZoneGrid( orbitSource, blue )\n  store.dispatch( planes.doSetWorkingPlaneGrid( gridPoints ) )\n\n  const parser = createParser( documentFactory )\n\n  // TODO: fetch all shape VEFs in a ZIP, then inject each\n  const shapeResources = []\n  shapeNames.forEach( shapeName => knownOrbitNames.forEach( orbitName => shapeResources.push( `com/vzome/core/parts/${shapeName}/${orbitName}.vef` ) ) )\n  await Promise.all( shapeResources.map( injectResource ) )\n  // now we are finally ready to shape instances\n  store.dispatch( shapers.shaperDefined( shaperName, shaper ) )\n  store.dispatch( { type: PARSER_READY, payload: parser } )\n  if ( ! store.getState().workingPlane ) {\n    let url = \"/app/models/vZomeLogo.vZome\"\n    const urlParams = new URLSearchParams( window.location.search );\n    if ( urlParams.has( \"url\" ) ) {\n      url = decodeURI( urlParams.get( \"url\" ) )\n    }\n    store.dispatch( fetchModel( url ) )\n  }\n}\n\nconst embedShape = ( shape ) =>\n{\n  const vertices = shape.getVertexList().toArray().map( av => {\n    const { x, y, z } = av.toRealVector()\n    return { x, y, z }\n  })\n  const faces = shape.getTriangleFaces().toArray()\n  const id = shape.getGuid().toString()\n  return { id, vertices, faces }\n}\n\nconst shaperFactory = ( vzomePkg, orbitSource ) => shapes => instance =>\n{\n  const { id, vectors, color } = instance\n  const jsAF = orbitSource.getSymmetry().getField()\n\n  const shown = new Map()\n  shown.set( id, instance )\n  const adapter = new Adapter( shown, new Map(), new Map() )\n\n  const man = vzomePkg.jsweet.JsManifestation.manifest( vectors, jsAF, adapter )\n  const rm = new vzomePkg.core.render.RenderedManifestation( man, orbitSource )\n  rm.resetAttributes( false, true )\n\n  // may be a zero-length strut, no shape\n  if ( !rm.getShape() )\n    return undefined\n  \n  // is the shape new?\n  const shapeId = rm.getShapeId().toString()\n  if ( ! shapes[ shapeId ] ) {\n    shapes[ shapeId ] = embedShape( rm.getShape() )\n  }\n\n  // get shape, orientation, color, and position from rm\n  const positionAV = rm.getLocationAV() || jsAF.origin( 3 )\n  const { x, y, z } = orbitSource.getSymmetry().embedInR3( positionAV )\n  const quatIndex = rm.getStrutZone()\n  const rotation = ( quatIndex && (quatIndex >= 0) && orbitSource.quaternions[ quatIndex ] ) || [0,0,0,1]\n  const finalColor = rm.getColor().getRGB()\n\n  return { id, position: [ x, y, z ], rotation, color: finalColor, shapeId }\n}\n\nclass Properties\n{\n  constructor( config )\n  {\n    this.config = config\n  }\n\n  getProperty( key )\n  {\n    return this.config[ key ]\n  }\n\n  get( key )\n  {\n    return this.config[ key ]\n  }\n}\n\nexport const legacyCommandFactory = ( createEditor, className ) => ( config ) => ( dispatch, getState ) =>\n{\n  const field = designs.selectCurrentField( getState() )\n  // TODO const symmetry = designs.selectCurrentSymmetry( getState() )\n  // TODO const shapes = designs.selectCurrentShapes( getState() )\n  let { shown, hidden, selected } = designs.selectCurrentMesh( getState() )\n  shown = new Map( shown )\n  hidden = new Map( hidden )\n  selected = new Map( selected )\n  const adapter = new Adapter( shown, selected, hidden )\n  // side-effects will appear in shown, hidden, and selected maps\n\n  createEditor( field.name ).configureAndPerformEdit( className, config, adapter )\n\n  dispatch( { type: WORK_STARTED } )\n  dispatch( meshChanged( shown, selected, hidden ) )\n  dispatch( { type: WORK_FINISHED } )\n}\n\nclass JavaDomNodeList\n{\n  constructor( nodeList )\n  {\n    this.nativeNodeList = nodeList\n    this.__interfaces = [ \"org.w3c.dom.NodeList\" ]\n  }\n\n  getLength()\n  {\n    return this.nativeNodeList.length\n  }\n\n  item( i )\n  {\n    const node = this.nativeNodeList.item( i )\n    if ( node.nodeType === 1 )\n      return new JavaDomElement( node )\n    else\n      return node\n  }\n}\n\nclass JavaDomElement\n{\n  constructor( element )\n  {\n    this.nativeElement = element\n    this.__interfaces = [ \"org.w3c.dom.Element\" ]\n  }\n\n  getAttribute( name )\n  {\n    return this.nativeElement.getAttribute && this.nativeElement.getAttribute( name )\n  }\n\n  getLocalName()\n  {\n    return this.nativeElement.localName\n  }\n\n  getTextContent()\n  {\n    return this.nativeElement.textContent\n  }\n\n  getChildNodes()\n  {\n    return new JavaDomNodeList( this.nativeElement.childNodes )\n  }\n\n  getChildElement( name )\n  {\n    let target = this.nativeElement.firstElementChild\n    while ( target && name.toLowerCase() !== target.nodeName.toLowerCase() )\n      target = target.nextElementSibling\n    return target && new JavaDomElement( target )\n  }\n\n  getElementsByTagName( name )\n  {\n    let target = this.nativeElement.firstElementChild\n    const results = []\n    while ( target ) {\n      if ( name.toLowerCase() === target.nodeName.toLowerCase() ) {\n        results.push( new JavaDomElement( target ) )\n      }\n      target = target.nextElementSibling\n    }\n    return { getLength: () => results.length, item: i => results[ i ] }\n  }\n}\n\nexport const createParser = ( createDocument ) => ( name, xmlText, dispatch, getState ) =>\n{\n  dispatch( startProgress( \"Parsing vZome file...\" ) )\n\n  const fields = getState().fields\n\n  try {\n    const parser = new DOMParser();\n    const domDoc = parser.parseFromString( xmlText, \"application/xml\" );\n    let vZomeRoot = new JavaDomElement( domDoc.firstElementChild )\n\n    const namespace = vZomeRoot.getAttribute( \"xmlns:vzome\" )\n    const fieldName = vZomeRoot.getAttribute( \"field\" )\n\n    const origin = goldenField.origin( 3 ) // TODO use the field name\n    const originBall = mesh.createInstance( [ origin ] )\n    const shown = new Map().set( originBall.id, originBall )\n    const hidden = new Map()\n    const selected = new Map()  \n\n    const { shaper, createEditFromXml } = createDocument( fieldName, namespace, vZomeRoot )\n\n    // We don't want to dispatch all the edits, which can trigger tons of\n    //  overhead and re-rendering.  Instead, we'll build up a design\n    //  by calling the designReducer manually.\n    let design = designs.initializeDesign( fields[ fieldName ], shaper.shapesName )\n\n    // const shaper = resolverFactory( orbitSource )\n    dispatch( shapers.shaperDefined( shaper.shapesName, shaper ) )\n\n    const history = vZomeRoot.getChildElement( \"EditHistory\" ).nativeElement\n    // TODO: use editNumber\n    const targetEdit = parseInt( history.getAttribute( \"editNumber\" ) )\n    let currentEdit = 0\n    let editElement = history.firstElementChild\n\n    const performEdits = ( editElement, adapter, recordEdit, increment ) =>\n    {\n      do {\n        console.log( editElement.outerHTML )\n        if ( editElement.nodeName === \"Branch\" ) {\n          const sandbox = adapter.clone()\n          performEdits( editElement.firstElementChild, sandbox, () => ({}), 0 ) // don't record mesh changes for branches, don't increment currentEdit\n          // we discard the cloned sandbox adapter\n        } else {\n          const wrappedElement = new JavaDomElement( editElement )\n          adapter = adapter.clone()  // each command builds on the last\n          // editor.setAdapter( adapter )\n          const edit = createEditFromXml( wrappedElement )\n          // null edit only happens for expected cases (e.g. \"Shapshot\"); others become CommandEdit\n          if ( edit ) {\n            edit.deserializeAndPerform( adapter )\n            design = designs.designReducer( design, recordEdit( adapter ) )\n          }\n        }\n        currentEdit += increment\n        editElement = editElement.nextElementSibling\n      }\n      while ( editElement );\n    }\n\n    // TODO: move this to Adapter itself?\n    const recordEdit = ( { shown, selected, hidden } ) => mesh.meshChanged( shown, selected, hidden )\n\n    const adapter = new Adapter( shown, selected, hidden )\n    performEdits( editElement, adapter, recordEdit, 1 )\n\n    console.log( `target is ${targetEdit}, currentEdit is ${currentEdit}` )\n    while ( currentEdit > targetEdit ) {\n      design = designs.designReducer( design, ActionCreators.undo() )\n      --currentEdit\n    }\n    console.log( `target is ${targetEdit}, currentEdit is ${currentEdit}` )\n    \n    const viewing = vZomeRoot.getChildElement( \"Viewing\" )\n    if ( viewing ) {\n      design = designs.designReducer( design, parseViewXml( viewing ) )\n    }\n    \n    const extIndex = name.lastIndexOf( '.' )\n    if ( extIndex > 0 ) {\n      name = name.substring( 0, extIndex )\n    }\n    dispatch( designs.loadedDesign( name, design ) )\n  } catch (error) {\n    console.log( error )\n    dispatch( showAlert( `Unable to parse model file: ${name};\\n ${error.message}` ) )\n  }\n\n  dispatch( stopProgress() )\n}\n","import golden from './golden'\n\nconst initialFields = { [golden.name]: golden }\n\nexport const reducer = ( state=initialFields, action ) => state\n","import React from 'react';\nimport { Provider } from 'react-redux'\nimport { render } from 'react-dom'\nimport * as serviceWorker from './serviceWorker';\n\nimport logger from 'redux-logger'\nimport thunk from 'redux-thunk'\n\nimport App from './App';\nimport createBundleStore from './bundles'\n\nconst store = createBundleStore( [ thunk ] );\n\nrender(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById( 'root' )\n)\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}